<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curso Eurocar - Andragog√≠a en Formaci√≥n de Conductores</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 30%, #fbbf24 70%, #f59e0b 100%);
      min-height: 100%;
      overflow-x: hidden;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      pointer-events: none;
      z-index: 0;
    }
    
    * {
      box-sizing: border-box;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
      position: relative;
      z-index: 1;
    }
    
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.2);
      margin-bottom: 20px;
      animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border: 2px solid rgba(30, 64, 175, 0.2);
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(50px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes glow {
      0%, 100% { box-shadow: 0 0 20px rgba(30, 64, 175, 0.3); }
      50% { box-shadow: 0 0 40px rgba(30, 64, 175, 0.6); }
    }
    
    .logo-section {
      text-align: center;
      margin-bottom: 30px;
      animation: float 3s ease-in-out infinite;
    }
    
    .logo {
      font-size: 48px;
      font-weight: bold;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #fbbf24 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      text-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .subtitle {
      color: #1e40af;
      font-size: 18px;
      font-weight: 600;
    }
    
    h1 {
      color: #1e40af;
      font-size: 32px;
      margin-bottom: 15px;
      text-align: center;
      font-weight: 700;
    }
    
    h2 {
      color: #1e40af;
      font-size: 26px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
    }
    
    h3 {
      color: #1e40af;
      font-size: 20px;
      margin-bottom: 15px;
      font-weight: 600;
    }
    
    h4 {
      color: #1e40af;
      font-size: 18px;
      margin-bottom: 12px;
      font-weight: 600;
    }
    
    .form-group {
      margin-bottom: 25px;
    }
    
    label {
      display: block;
      color: #1e40af;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 15px;
      border: 2px solid rgba(30, 64, 175, 0.2);
      border-radius: 12px;
      font-size: 16px;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      color: #1f2937;
    }
    
    input[type="text"]:focus, input[type="number"]:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 8px 25px rgba(59, 130, 246, 0.2);
      transform: translateY(-2px);
    }
    
    .btn {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #fbbf24 100%);
      color: white;
      border: none;
      padding: 18px 35px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: 0 8px 25px rgba(30, 64, 175, 0.4);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 35px rgba(30, 64, 175, 0.6);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
      color: #374151;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .btn-secondary:hover {
      background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    
    .progress-bar {
      background: rgba(226, 232, 240, 0.5);
      height: 12px;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 25px;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .progress-fill {
      background: linear-gradient(90deg, #1e40af 0%, #3b82f6 50%, #fbbf24 100%);
      height: 100%;
      transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(30, 64, 175, 0.4);
      position: relative;
    }
    
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    .progress-text {
      text-align: center;
      color: #1e40af;
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 16px;
    }
    
    .module-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }
    
    .module-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.95) 100%);
      backdrop-filter: blur(15px);
      border-radius: 16px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border: 2px solid rgba(30, 64, 175, 0.1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      min-height: 180px;
    }
    
    .module-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(251, 191, 36, 0.1) 100%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .module-card:hover::before {
      opacity: 1;
    }
    
    .module-card:hover {
      transform: translateY(-8px) rotateX(5deg) rotateY(5deg);
      border-color: #3b82f6;
      box-shadow: 0 20px 40px rgba(30, 64, 175, 0.3);
    }
    
    .module-card.completed {
      background: linear-gradient(135deg, rgba(220, 252, 231, 0.95) 0%, rgba(187, 247, 208, 0.95) 100%);
      border-color: #10b981;
    }
    
    .module-card.completed:hover {
      box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
    }
    
    .module-card.active {
      border-color: #3b82f6;
      background: linear-gradient(135deg, rgba(219, 234, 254, 0.95) 0%, rgba(191, 219, 254, 0.95) 100%);
      animation: glow 2s infinite;
    }
    
    .module-icon {
      font-size: 36px;
      margin-bottom: 12px;
      display: block;
      animation: float 3s ease-in-out infinite;
    }
    
    .module-title {
      font-size: 20px;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 10px;
      line-height: 1.3;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .module-description {
      color: #374151;
      font-size: 15px;
      line-height: 1.6;
      font-weight: 500;
    }
    
    .flip-card {
      background-color: transparent;
      width: 100%;
      height: 220px;
      perspective: 1000px;
      margin: 20px 0;
    }
    
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.8s;
      transform-style: preserve-3d;
      cursor: pointer;
    }
    
    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }
    
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .flip-card-front {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
    }
    
    .flip-card-front h3 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 12px;
      text-align: center;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .flip-card-front p {
      font-size: 16px;
      font-weight: 500;
      text-align: center;
      color: white;
      line-height: 1.4;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    
    .flip-card-back {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: #1f2937;
      transform: rotateY(180deg);
    }
    
    .flip-card-back h3 {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 12px;
      text-align: center;
      color: #1f2937;
      text-shadow: 0 1px 2px rgba(255,255,255,0.3);
    }
    
    .flip-card-back p {
      font-size: 15px;
      font-weight: 600;
      text-align: center;
      color: #1f2937;
      line-height: 1.5;
      text-shadow: 0 1px 1px rgba(255,255,255,0.2);
    }
    
    .expandable-section {
      border: 2px solid rgba(30, 64, 175, 0.2);
      border-radius: 12px;
      margin: 20px 0;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .expandable-header {
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(251, 191, 36, 0.1) 100%);
      padding: 16px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      color: #1e40af;
      transition: all 0.3s;
    }
    
    .expandable-header:hover {
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.2) 0%, rgba(251, 191, 36, 0.2) 100%);
    }
    
    .expandable-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      background: rgba(255, 255, 255, 0.5);
    }
    
    .expandable-content.expanded {
      max-height: 2000px;
      padding: 20px;
    }
    
    .expand-icon {
      transition: transform 0.3s;
      font-size: 18px;
      color: #3b82f6;
    }
    
    .expand-icon.rotated {
      transform: rotate(180deg);
    }
    
    .flashcard-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }
    
    .flashcard {
      height: 160px;
      perspective: 1000px;
    }
    
    .flashcard-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      cursor: pointer;
    }
    
    .flashcard.flipped .flashcard-inner {
      transform: rotateY(180deg);
    }
    
    .flashcard-front, .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .flashcard-front {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
      text-align: center;
    }
    
    .flashcard-front div {
      font-size: 16px;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      line-height: 1.3;
    }
    
    .flashcard-back {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      color: #1f2937;
      transform: rotateY(180deg);
      text-align: left;
      border: 2px solid #10b981;
    }
    
    .flashcard-back div {
      font-size: 14px;
      font-weight: 600;
      line-height: 1.5;
      color: #1f2937;
    }
    
    .age-group-tabs {
      display: flex;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 4px;
      margin: 20px 0;
      backdrop-filter: blur(10px);
    }
    
    .age-tab {
      flex: 1;
      padding: 12px 16px;
      text-align: center;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
      color: #4b5563;
      font-size: 14px;
    }
    
    .age-tab.active {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(30, 64, 175, 0.4);
    }
    
    .age-content {
      display: none;
      animation: fadeInUp 0.5s ease-out;
    }
    
    .age-content.active {
      display: block;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .quiz-option {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(30, 64, 175, 0.2);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      position: relative;
      overflow: hidden;
      color: #1f2937;
    }
    
    .quiz-option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(30, 64, 175, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .quiz-option:hover::before {
      left: 100%;
    }
    
    .quiz-option:hover {
      border-color: #3b82f6;
      transform: translateX(5px);
      box-shadow: 0 8px 25px rgba(30, 64, 175, 0.2);
    }
    
    .quiz-option.selected {
      border-color: #3b82f6;
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(251, 191, 36, 0.1) 100%);
      transform: scale(1.02);
    }
    
    .quiz-option.correct {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
      animation: pulse 0.6s;
    }
    
    .quiz-option.incorrect {
      border-color: #ef4444;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
      animation: shake 0.6s;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .highlight-box {
      background: linear-gradient(135deg, rgba(254, 242, 242, 0.95) 0%, rgba(254, 226, 226, 0.95) 100%);
      border-left: 4px solid #ef4444;
      padding: 22px;
      border-radius: 12px;
      margin: 20px 0;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      color: #111827;
      font-size: 15px;
      line-height: 1.6;
    }
    
    .highlight-box.info {
      background: linear-gradient(135deg, rgba(239, 246, 255, 0.95) 0%, rgba(219, 234, 254, 0.95) 100%);
      border-left-color: #3b82f6;
    }
    
    .highlight-box.success {
      background: linear-gradient(135deg, rgba(240, 253, 244, 0.95) 0%, rgba(220, 252, 231, 0.95) 100%);
      border-left-color: #10b981;
    }
    
    .highlight-box h4 {
      color: #111827;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 12px;
    }
    
    .highlight-box p {
      color: #111827;
      font-size: 15px;
      line-height: 1.6;
      margin-bottom: 10px;
    }
    
    .highlight-box ul li {
      color: #111827;
      font-size: 15px;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }
    
    .stat-card {
      background: linear-gradient(135deg, rgba(219, 234, 254, 0.9) 0%, rgba(191, 219, 254, 0.9) 100%);
      backdrop-filter: blur(15px);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s;
      border: 1px solid rgba(30, 64, 175, 0.2);
    }
    
    .stat-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 15px 35px rgba(30, 64, 175, 0.3);
    }
    
    .stat-number {
      font-size: 32px;
      font-weight: bold;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 6px;
    }
    
    .stat-label {
      color: #4b5563;
      font-size: 13px;
      font-weight: 500;
    }
    
    .button-group {
      display: flex;
      gap: 16px;
      margin-top: 25px;
    }
    
    .button-group .btn {
      flex: 1;
    }
    
    .hidden {
      display: none;
    }
    
    .story-text {
      font-size: 17px;
      line-height: 1.7;
      color: #111827;
      margin-bottom: 20px;
      font-weight: 400;
    }
    
    .character-bubble {
      background: linear-gradient(135deg, rgba(254, 249, 195, 0.95) 0%, rgba(254, 240, 138, 0.95) 100%);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 22px;
      margin: 20px 0;
      position: relative;
      border: 2px solid #fbbf24;
      box-shadow: 0 8px 25px rgba(251, 191, 36, 0.2);
      color: #111827;
      font-size: 15px;
      line-height: 1.6;
      font-weight: 500;
    }
    
    .character-bubble::before {
      content: 'üí≠';
      position: absolute;
      top: -12px;
      left: 20px;
      font-size: 24px;
      animation: float 2s ease-in-out infinite;
    }
    
    .loading {
      text-align: center;
      padding: 25px;
      color: #3b82f6;
    }
    
    .spinner {
      border: 4px solid rgba(59, 130, 246, 0.2);
      border-top: 4px solid #3b82f6;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .completion-badge {
      text-align: center;
      padding: 40px;
    }
    
    .badge-icon {
      font-size: 80px;
      margin-bottom: 20px;
      animation: bounce 1.5s ease infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    ul {
      margin: 16px 0;
      padding-left: 25px;
    }
    
    li {
      margin-bottom: 10px;
      color: #374151;
      line-height: 1.6;
      font-size: 15px;
      font-weight: 400;
    }
    
    .interactive-demo {
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(251, 191, 36, 0.1) 100%);
      border-radius: 16px;
      padding: 25px;
      margin: 20px 0;
      border: 2px solid rgba(30, 64, 175, 0.2);
    }
    
    .demo-controls {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    
    .demo-btn {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 600;
      font-size: 14px;
    }
    
    .demo-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(30, 64, 175, 0.4);
    }
    
    .scenario-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      border-left: 4px solid #3b82f6;
      transition: all 0.3s;
      color: #111827;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .scenario-card:hover {
      transform: translateX(5px);
      box-shadow: 0 6px 20px rgba(30, 64, 175, 0.25);
    }
    
    .scenario-card h4 {
      color: #1e40af;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 12px;
    }
    
    .scenario-card p {
      color: #111827;
      font-size: 15px;
      line-height: 1.6;
      margin-bottom: 10px;
    }
    
    .scenario-card ul li {
      color: #111827;
      font-size: 15px;
    }
    
    .knowledge-check-container {
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%);
      border: 2px solid #fbbf24;
      border-radius: 16px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 8px 25px rgba(251, 191, 36, 0.2);
    }
    
    .knowledge-check-header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(251, 191, 36, 0.3);
    }
    
    .knowledge-check-header h4 {
      color: #92400e;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .knowledge-check-header p {
      color: #92400e;
      font-size: 16px;
      font-weight: 600;
      margin: 0;
    }
    
    .knowledge-question {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid #fbbf24;
    }
    
    .knowledge-question p {
      color: #1f2937;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
    }
    
    .knowledge-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .knowledge-option {
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid rgba(251, 191, 36, 0.3);
      border-radius: 10px;
      padding: 12px 16px;
      cursor: pointer;
      transition: all 0.3s;
      color: #1f2937;
      font-weight: 500;
    }
    
    .knowledge-option:hover {
      border-color: #fbbf24;
      transform: translateX(5px);
      box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
    }
    
    .knowledge-option.selected {
      transform: scale(1.02);
    }
    
    .knowledge-option.correct {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
      animation: pulse 0.6s;
    }
    
    .knowledge-option.incorrect {
      border-color: #ef4444;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
      animation: shake 0.6s;
    }
    
    .knowledge-feedback {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.1) 100%);
      border: 2px solid #3b82f6;
      border-radius: 10px;
      padding: 15px;
      margin-top: 15px;
    }
    
    .knowledge-feedback p {
      color: #1e40af;
      font-size: 15px;
      font-weight: 600;
      margin: 0;
      line-height: 1.5;
    }
    
    .intro-highlight {
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%);
      border: 2px solid #3b82f6;
      border-radius: 16px;
      padding: 25px;
      margin: 25px 0;
      text-align: center;
      box-shadow: 0 8px 25px rgba(30, 64, 175, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .intro-highlight::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: shimmer 3s infinite;
    }
    
    .intro-highlight h3 {
      color: #1e40af;
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 15px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .intro-highlight p {
      color: #1e40af;
      font-size: 18px;
      font-weight: 600;
      margin: 0;
      line-height: 1.6;
    }
    
    .section-divider {
      background: linear-gradient(90deg, transparent, #3b82f6, transparent);
      height: 3px;
      margin: 30px 0;
      border-radius: 2px;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }
    
    .incomplete-section {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
      border: 2px dashed #ef4444;
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
    }
    
    .incomplete-section h4 {
      color: #dc2626;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 10px;
    }
    
    .incomplete-section p {
      color: #dc2626;
      font-size: 15px;
      font-weight: 600;
      margin: 0;
    }
    
    .certificate-container {
      margin: 40px 0;
      text-align: center;
    }
    
    .certificate {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border: 3px solid #1e40af;
      border-radius: 20px;
      padding: 40px;
      margin: 20px auto;
      max-width: 800px;
      box-shadow: 0 20px 60px rgba(30, 64, 175, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .certificate::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="cert-pattern" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(30,64,175,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23cert-pattern)"/></svg>');
      pointer-events: none;
      z-index: 0;
    }
    
    .certificate > * {
      position: relative;
      z-index: 1;
    }
    
    .certificate-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #fbbf24;
    }
    
    .certificate-logo {
      font-size: 36px;
      font-weight: bold;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #fbbf24 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }
    
    .certificate-subtitle {
      color: #1e40af;
      font-size: 16px;
      font-weight: 600;
    }
    
    .certificate-title {
      font-size: 28px;
      font-weight: bold;
      color: #1e40af;
      text-align: center;
      margin: 30px 0;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    
    .certificate-body {
      text-align: center;
      margin: 30px 0;
    }
    
    .certificate-text {
      color: #374151;
      font-size: 18px;
      margin: 15px 0;
      font-weight: 500;
    }
    
    .certificate-name {
      font-size: 32px;
      font-weight: bold;
      color: #1e40af;
      margin: 20px 0;
      padding: 15px;
      border-bottom: 3px solid #fbbf24;
      display: inline-block;
      min-width: 300px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .certificate-course {
      font-size: 24px;
      font-weight: bold;
      color: #1e40af;
      margin: 25px 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .certificate-modules {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin: 25px 0;
      text-align: left;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .module-completed {
      color: #059669;
      font-size: 16px;
      font-weight: 600;
      padding: 8px 15px;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 8px;
      border-left: 4px solid #10b981;
    }
    
    .certificate-date {
      margin: 30px 0;
    }
    
    .certificate-date p {
      color: #374151;
      font-size: 18px;
      font-weight: 600;
    }
    
    .certificate-footer {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-top: 50px;
      padding-top: 30px;
      border-top: 2px solid #e5e7eb;
    }
    
    .signature-section {
      text-align: center;
      flex: 1;
    }
    
    .signature-line {
      width: 200px;
      height: 2px;
      background: #374151;
      margin: 0 auto 10px;
    }
    
    .signature-title {
      color: #374151;
      font-size: 14px;
      font-weight: 600;
      margin: 5px 0;
    }
    
    .signature-name {
      color: #6b7280;
      font-size: 12px;
      margin: 0;
    }
    
    .certificate-seal {
      flex: 0 0 auto;
    }
    
    .seal {
      width: 100px;
      height: 100px;
      border: 4px solid #1e40af;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      position: relative;
    }
    
    .seal::before {
      content: '';
      position: absolute;
      width: 80px;
      height: 80px;
      border: 2px solid #fbbf24;
      border-radius: 50%;
    }
    
    .seal-inner {
      text-align: center;
      color: white;
      z-index: 1;
    }
    
    .seal-text {
      font-size: 12px;
      font-weight: bold;
      line-height: 1;
    }
    
    .seal-year {
      font-size: 10px;
      font-weight: 600;
    }
    
    .certificate-number {
      position: absolute;
      bottom: 15px;
      right: 20px;
      color: #6b7280;
      font-size: 12px;
      font-weight: 500;
    }
    
    .certificate-actions {
      margin-top: 30px;
      text-align: center;
    }
    
    @media print {
      .certificate-actions {
        display: none;
      }
      
      .certificate {
        box-shadow: none;
        border: 2px solid #1e40af;
        margin: 0;
        max-width: none;
      }
      
      body {
        background: white;
      }
      
      .container {
        max-width: none;
        padding: 0;
      }
    }
    
    .vehicle-demo {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 20px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .vehicle {
      font-size: 48px;
      cursor: pointer;
      transition: all 0.3s;
      animation: float 3s ease-in-out infinite;
    }
    
    .vehicle:hover {
      transform: scale(1.2);
    }
    
    .vehicle.selected {
      transform: scale(1.3);
      filter: drop-shadow(0 0 10px #fbbf24);
    }
    
    .calculator-demo {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      border: 2px solid #3b82f6;
    }
    
    .input-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .result-display {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: 15px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    thead {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
    }
    
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }
    
    th {
      font-weight: 600;
    }
    
    tbody tr:hover {
      background: rgba(30, 64, 175, 0.05);
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 12px;
      }
      
      .card {
        padding: 20px;
      }
      
      .module-grid {
        grid-template-columns: 1fr;
      }
      
      .flashcard-container {
        grid-template-columns: 1fr;
      }
      
      .age-group-tabs {
        flex-direction: column;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .vehicle-demo {
        justify-content: center;
      }
      
      .input-group {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <div id="welcomeScreen" class="card">
    <div class="logo-section">
     <div class="logo">
      üöó ANDA VIAL
     </div>
     <div class="subtitle" id="institutionName">
      Centro de Ense√±anza Automovil√≠stica
     </div>
    </div>
    <h1 id="courseTitle">Andragog√≠a en Formaci√≥n de Conductores</h1>
    <p style="text-align: center; color: #4b5563; margin-bottom: 30px; font-size: 16px;" id="welcomeMsg">Aprende a ense√±ar conducci√≥n responsable</p>
    <div class="flip-card">
     <div class="flip-card-inner">
      <div class="flip-card-front">
       <h3>üéì ¬øQu√© Aprender√°s?</h3>
       <p>T√©cnicas andrag√≥gicas para formar conductores responsables</p>
      </div>
      <div class="flip-card-back">
       <h3>üéØ Tu Misi√≥n</h3>
       <p>Dominar las estrategias para ense√±ar a adolescentes, j√≥venes, adultos y adultos mayores</p>
      </div>
     </div>
    </div>
    <div class="form-group"><label for="studentName">¬øCu√°l es tu nombre?</label> <input type="text" id="studentName" placeholder="Escribe tu nombre completo">
    </div><button class="btn" id="startBtn" disabled>üöÄ Comenzar Mi Formaci√≥n como Instructor</button>
    <div class="highlight-box info" style="margin-top: 25px;">
     <h4>üí° Informaci√≥n Importante sobre el Guardado</h4>
     <div class="expandable-section">
      <div class="expandable-header" onclick="toggleExpandable(this)"><span>üìä ¬øC√≥mo funciona el guardado en tu hoja de Canva?</span> <span class="expand-icon">‚ñº</span>
      </div>
      <div class="expandable-content">
       <p><strong>üéØ Tu progreso se guarda autom√°ticamente:</strong></p>
       <ul>
        <li>üìù <strong>Al iniciar:</strong> Tu nombre y fecha de inicio</li>
        <li>üìö <strong>Por cada m√≥dulo:</strong> Progreso actualizado en tiempo real</li>
        <li>‚úÖ <strong>Al completar:</strong> M√≥dulos terminados y porcentaje total</li>
        <li>üèÜ <strong>Al finalizar:</strong> Certificaci√≥n completa</li>
       </ul>
       <p><strong>üîç C√≥mo verificar que funciona:</strong></p>
       <ol>
        <li>Presiona F12 para abrir la consola del navegador</li>
        <li>Busca mensajes con ‚úÖ (√©xito) o ‚ùå (error)</li>
        <li>Ve a tu hoja de Canva para confirmar los datos</li>
       </ol>
       <p><strong>‚ö†Ô∏è Si hay problemas:</strong></p>
       <ul>
        <li>Verifica tu conexi√≥n a internet</li>
        <li>Actualiza la p√°gina y vuelve a intentar</li>
        <li>El curso funciona aunque no se guarde (modo local)</li>
       </ul>
       <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; margin-top: 15px;">
        <p><strong>‚ú® Beneficios del guardado:</strong></p>
        <ul>
         <li>üîÑ Contin√∫a donde lo dejaste</li>
         <li>üìà Seguimiento de tu progreso</li>
         <li>üéì Certificado personalizado</li>
         <li>üìä Estad√≠sticas de aprendizaje</li>
        </ul>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div id="courseScreen" class="hidden">
    <div class="card">
     <div class="progress-text" id="progressText">
      Progreso: 0%
     </div>
     <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 0%"></div>
     </div>
     <h2 id="studentGreeting">üëã Hola, Instructor</h2>
     <div class="module-grid" id="moduleList"></div>
    </div>
   </div>
   <div id="moduleScreen" class="hidden">
    <div class="card"><button class="btn btn-secondary" id="backBtn" style="width: auto; margin-bottom: 20px;">‚Üê Volver al Men√∫</button>
     <div id="moduleContent"></div>
     <div class="button-group"><button class="btn btn-secondary" id="prevBtn">‚Üê Anterior</button> <button class="btn" id="nextBtn">Siguiente ‚Üí</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      course_title: "Andragog√≠a en Formaci√≥n de Conductores",
      institution_name: "Anda Vial",
      welcome_message: "Aprende a ense√±ar conducci√≥n responsable"
    };

    let currentStudent = null;
    let currentModuleIndex = 0;
    let currentPageIndex = 0;
    let quizAnswers = {};

    const modules = [
      {
        id: 1,
        icon: "üéØ",
        title: "Fundamentos de la Andragog√≠a Vial",
        description: "Preparando tu primera clase: C√≥mo conectar con adultos de diferentes edades",
        pages: [
          {
            type: "interactive",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>üåü Preparando Tu Primera Clase Andrag√≥gica</h3>
                  <p>Imag√≠nate: Ma√±ana tienes tu primera clase con un grupo diverso. Hay un adolescente de 17 a√±os, una joven profesional de 28, un padre de familia de 42 y un se√±or de 65 a√±os. ¬øC√≥mo vas a conectar con todos?</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üß† Andragog√≠a</h3>
                      <p>El arte de ense√±ar a adultos</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üìö La Diferencia Clave</h3>
                      <p>Los ni√±os aprenden porque deben. Los adultos aprenden porque quieren y necesitan.</p>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üéì Tu Caja de Herramientas Andrag√≥gicas</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="flashcard-container">
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üéØ MOTIVACI√ìN</div>
                          </div>
                          <div class="flashcard-back">
                            <div>Los adultos aprenden cuando ven la utilidad pr√°ctica. Conecta cada regla con situaciones reales de su vida.</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üß† EXPERIENCIA</div>
                          </div>
                          <div class="flashcard-back">
                            <div>Valora su experiencia previa. √ösala como base para construir nuevos conocimientos.</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üé™ PARTICIPACI√ìN</div>
                          </div>
                          <div class="flashcard-back">
                            <div>Los adultos necesitan participar activamente. Haz preguntas, genera discusi√≥n.</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üéØ RELEVANCIA</div>
                          </div>
                          <div class="flashcard-back">
                            <div>Todo debe ser relevante para su vida. Explica el "por qu√©" de cada norma.</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí° Reflexi√≥n del Instructor:</strong><br>
                  "Antes pensaba que ense√±ar era solo transmitir informaci√≥n. Ahora entiendo que es crear experiencias que transformen vidas. Cada estudiante trae su historia, y mi trabajo es conectar esa historia con la seguridad vial."
                </div>
                
                <div class="section-divider"></div>
                
                <div class="knowledge-check-container">
                  <div class="knowledge-check-header">
                    <h4>üß† Verificaci√≥n de Conocimientos</h4>
                    <p>Responde estas preguntas para asegurar tu comprensi√≥n:</p>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 1:</strong> ¬øCu√°l es la principal diferencia entre pedagog√≠a y andragog√≠a?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 0, 0, true)">
                        Los ni√±os aprenden porque deben, los adultos porque quieren y necesitan
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 0, 1, false)">
                        Los adultos aprenden m√°s lento que los ni√±os
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 0, 2, false)">
                        No hay diferencia, ambos usan los mismos m√©todos
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-0-0-0" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> La andragog√≠a reconoce que los adultos tienen motivaciones intr√≠nsecas y experiencias previas que influyen en su aprendizaje.</p>
                    </div>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 2:</strong> ¬øQu√© estrategia es m√°s efectiva para ense√±ar a un adolescente de 17 a√±os?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 1, 0, false)">
                        Usar autoridad y reglas estrictas
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 1, 1, true)">
                        Gamificaci√≥n y presi√≥n de grupo positiva
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(0, 0, 1, 2, false)">
                        Tratarlo como un adulto mayor
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-0-0-1" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> Los adolescentes responden mejor a m√©todos interactivos que conecten con su mundo digital y social.</p>
                    </div>
                  </div>
                </div>
              </div>
            `
          },
          {
            type: "age-groups",
            content: `
              <h3>üë• Preparando Estrategias por Grupo de Edad</h3>
              <p>Para tu clase de ma√±ana, necesitas entender c√≥mo piensa cada grupo etario:</p>
              
              <div class="age-group-tabs">
                <div class="age-tab active" onclick="showAgeContent('adolescente')">üë¶ 16-18 a√±os</div>
                <div class="age-tab" onclick="showAgeContent('joven')">üë® 19-35 a√±os</div>
                <div class="age-tab" onclick="showAgeContent('adulto')">üëî 36-59 a√±os</div>
                <div class="age-tab" onclick="showAgeContent('mayor')">üë¥ 60+ a√±os</div>
              </div>
              
              <div id="adolescente" class="age-content active">
                <div class="scenario-card">
                  <h4>üß† C√≥mo Piensa tu Estudiante Adolescente</h4>
                  <p><strong>Corteza prefrontal en desarrollo:</strong> Hasta los 25 a√±os, la zona del cerebro responsable de evaluar riesgos no est√° completamente madura.</p>
                  <p><strong>Su mundo:</strong> Redes sociales, imagen, aceptaci√≥n del grupo, sensaci√≥n de invencibilidad.</p>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Tu Plan de Clase para Adolescentes</h4>
                  <ul>
                    <li><strong>Usa simuladores y videos:</strong> Son nativos digitales</li>
                    <li><strong>Historias de pares:</strong> Casos de j√≥venes como ellos</li>
                    <li><strong>Estad√≠sticas impactantes:</strong> Los datos los motivan</li>
                    <li><strong>Presi√≥n de grupo positiva:</strong> "Los conductores cool son seguros"</li>
                  </ul>
                </div>
                
                <div class="interactive-demo">
                  <h4>üí° Ejemplo de Di√°logo en Clase</h4>
                  <p><strong>Tema:</strong> Velocidad</p>
                  <p><strong>‚ùå No digas:</strong> "No corras porque es peligroso"</p>
                  <p><strong>‚úÖ Mejor di:</strong> "A 80 km/h en zona de 50, tienes 4 veces m√°s probabilidad de causar una tragedia. ¬øQuieres cargar con esa responsabilidad toda tu vida?"</p>
                </div>
              </div>
              
              <div id="joven" class="age-content">
                <div class="scenario-card">
                  <h4>üì± C√≥mo Piensa tu Estudiante Joven</h4>
                  <p><strong>Multitarea constante:</strong> Est√°n acostumbrados a hacer varias cosas a la vez, lo que es peligroso al conducir.</p>
                  <p><strong>Su mundo:</strong> Carrera profesional, independencia econ√≥mica, eficiencia, tecnolog√≠a.</p>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Tu Plan de Clase para J√≥venes</h4>
                  <ul>
                    <li><strong>Enfoque en eficiencia:</strong> "Conducir seguro te ahorra tiempo y dinero"</li>
                    <li><strong>Tecnolog√≠a como aliada:</strong> Apps de conducci√≥n, GPS, asistentes</li>
                    <li><strong>Casos de √©xito profesional:</strong> C√≥mo la conducci√≥n segura impacta su carrera</li>
                    <li><strong>Responsabilidad social:</strong> Su impacto en la sociedad</li>
                  </ul>
                </div>
                
                <div class="interactive-demo">
                  <h4>üí° Ejemplo de Di√°logo en Clase</h4>
                  <p><strong>Tema:</strong> Distracci√≥n por celular</p>
                  <p><strong>‚ùå No digas:</strong> "No uses el celular"</p>
                  <p><strong>‚úÖ Mejor di:</strong> "5 segundos viendo el celular = 140 metros a ciegas a 100 km/h. ¬øVale la pena un mensaje por tu futuro profesional?"</p>
                </div>
              </div>
              
              <div id="adulto" class="age-content">
                <div class="scenario-card">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ C√≥mo Piensa tu Estudiante Adulto</h4>
                  <p><strong>Responsabilidades familiares:</strong> Tienen mucho que proteger y perder.</p>
                  <p><strong>Su mundo:</strong> Familia, trabajo, responsabilidades, experiencia acumulada.</p>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Tu Plan de Clase para Adultos</h4>
                  <ul>
                    <li><strong>Enfoque familiar:</strong> "Protege a quienes amas"</li>
                    <li><strong>Ejemplos con hijos:</strong> "¬øQu√© ejemplo das a tus hijos?"</li>
                    <li><strong>Consecuencias econ√≥micas:</strong> Costos de accidentes, seguros</li>
                    <li><strong>Experiencia como fortaleza:</strong> Valida su conocimiento previo</li>
                  </ul>
                </div>
                
                <div class="interactive-demo">
                  <h4>üí° Ejemplo de Di√°logo en Clase</h4>
                  <p><strong>Tema:</strong> Fatiga</p>
                  <p><strong>‚ùå No digas:</strong> "Descansa cuando est√©s cansado"</p>
                  <p><strong>‚úÖ Mejor di:</strong> "Tus hijos necesitan que llegues a casa. 4 segundos de microsue√±o pueden cambiar sus vidas para siempre."</p>
                </div>
              </div>
              
              <div id="mayor" class="age-content">
                <div class="scenario-card">
                  <h4>üßì C√≥mo Piensa tu Estudiante Mayor</h4>
                  <p><strong>Sabidur√≠a acumulada:</strong> D√©cadas de experiencia, pero posibles cambios f√≠sicos.</p>
                  <p><strong>Su mundo:</strong> Autonom√≠a, independencia, orgullo generacional, adaptaci√≥n.</p>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Tu Plan de Clase para Mayores</h4>
                  <ul>
                    <li><strong>Respeto por su experiencia:</strong> "Usted ha visto mucho en la v√≠a"</li>
                    <li><strong>Adaptaci√≥n, no limitaci√≥n:</strong> C√≥mo adaptar la conducci√≥n</li>
                    <li><strong>Autonom√≠a e independencia:</strong> Mantener su libertad de movilidad</li>
                    <li><strong>Paciencia y claridad:</strong> Explicaciones detalladas y pausadas</li>
                  </ul>
                </div>
                
                <div class="interactive-demo">
                  <h4>üí° Ejemplo de Di√°logo en Clase</h4>
                  <p><strong>Tema:</strong> Revisi√≥n m√©dica</p>
                  <p><strong>‚ùå No digas:</strong> "Ya est√° muy viejo para conducir"</p>
                  <p><strong>‚úÖ Mejor di:</strong> "Su experiencia es valiosa. Un chequeo m√©dico regular asegura que pueda seguir conduciendo con confianza."</p>
                </div>
              </div>
            `
          }
        ]
      },
      {
        id: 2,
        icon: "‚ö°",
        title: "Ense√±ando sobre Velocidad",
        description: "Preparando la clase m√°s impactante: La f√≠sica mortal de la velocidad",
        pages: [
          {
            type: "story",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>‚ö° Preparando "La Clase de la Velocidad"</h3>
                  <p>Es lunes por la ma√±ana. Hoy vas a ense√±ar el tema m√°s cr√≠tico: velocidad. No es solo hablar de l√≠mites, es hacer que entiendan que cada kil√≥metro por hora adicional puede ser la diferencia entre la vida y la muerte.</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üìä Estad√≠stica Fr√≠a</h3>
                      <p>"La velocidad causa el 30% de los accidentes mortales"</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üíî Realidad F√≠sica</h3>
                      <p>"La energ√≠a de impacto aumenta con el CUADRADO de la velocidad. 60 km/h = 4 veces m√°s energ√≠a que 30 km/h"</p>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üßÆ Demo Interactiva: Calculadora de Supervivencia</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="interactive-demo">
                      <h4>üöó Selecciona el Veh√≠culo para tu Demostraci√≥n</h4>
                      <div class="vehicle-demo">
                        <div class="vehicle" onclick="selectVehicle('car')" data-vehicle="car">üöó</div>
                        <div class="vehicle" onclick="selectVehicle('motorcycle')" data-vehicle="motorcycle">üèçÔ∏è</div>
                        <div class="vehicle" onclick="selectVehicle('bike')" data-vehicle="bike">üö≤</div>
                        <div class="vehicle" onclick="selectVehicle('truck')" data-vehicle="truck">üöõ</div>
                      </div>
                      
                      <div class="calculator-demo">
                        <h4>üìè Calculadora de Distancias de Frenado</h4>
                        <div class="input-group">
                          <div class="form-group">
                            <label>Velocidad (km/h)</label>
                            <input type="number" id="speedInput" value="50" min="10" max="150" onchange="calculateStoppingDistance()">
                          </div>
                          <div class="form-group">
                            <label>Condici√≥n del Clima</label>
                            <select id="weatherSelect" onchange="calculateStoppingDistance()" style="width: 100%; padding: 15px; border: 2px solid rgba(30, 64, 175, 0.2); border-radius: 12px; font-size: 16px;">
                              <option value="1">Seco</option>
                              <option value="1.3">Lluvia ligera</option>
                              <option value="1.5">Lluvia fuerte</option>
                              <option value="2">Nieve/Hielo</option>
                            </select>
                          </div>
                        </div>
                        
                        <div id="stoppingResult" class="result-display">
                          Distancia Total de Frenado: 28 metros
                        </div>
                        
                        <div style="margin-top: 20px;">
                          <p><strong>F√≥rmula de Supervivencia:</strong></p>
                          <p style="background: rgba(30, 64, 175, 0.1); padding: 15px; border-radius: 10px; font-weight: bold;">
                            Distancia Total = Distancia de Reacci√≥n + Distancia de Frenado
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üíÄ Demo: Tabla de Supervivencia por Edad</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="stats-grid">
                      <div class="stat-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%);">
                        <div class="stat-number" style="color: white;">90%</div>
                        <div class="stat-label" style="color: white;">Supervivencia ni√±os a 30 km/h</div>
                      </div>
                      <div class="stat-card" style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.9) 0%, rgba(245, 158, 11, 0.9) 100%);">
                        <div class="stat-number" style="color: white;">20%</div>
                        <div class="stat-label" style="color: white;">Supervivencia adultos a 50 km/h</div>
                      </div>
                      <div class="stat-card" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%);">
                        <div class="stat-number" style="color: white;">0%</div>
                        <div class="stat-label" style="color: white;">Supervivencia mayores a 80 km/h</div>
                      </div>
                      <div class="stat-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.9) 0%, rgba(147, 51, 234, 0.9) 100%);">
                        <div class="stat-number" style="color: white;">5%</div>
                        <div class="stat-label" style="color: white;">Supervivencia mujeres embarazadas a 60 km/h</div>
                      </div>
                    </div>
                    
                    <div class="interactive-demo">
                      <h4>üë∂üëµ Factor Edad: C√≥mo Ense√±ar la Vulnerabilidad</h4>
                      <div class="flashcard-container">
                        <div class="flashcard" onclick="flipCard(this)">
                          <div class="flashcard-inner">
                            <div class="flashcard-front">
                              <div>üë∂ NI√ëOS<br><small>0-14 a√±os</small></div>
                            </div>
                            <div class="flashcard-back">
                              <div><strong>Cr√°neo flexible:</strong> Lesiones cerebrales graves incluso a 20 km/h. Su cabeza es proporcionalmente m√°s grande y pesada.</div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="flashcard" onclick="flipCard(this)">
                          <div class="flashcard-inner">
                            <div class="flashcard-front">
                              <div>üí™ ADULTOS J√ìVENES<br><small>15-45 a√±os</small></div>
                            </div>
                            <div class="flashcard-back">
                              <div><strong>Mayor resistencia:</strong> Mejor capacidad de supervivencia, pero la f√≠sica sigue siendo implacable a altas velocidades.</div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="flashcard" onclick="flipCard(this)">
                          <div class="flashcard-inner">
                            <div class="flashcard-front">
                              <div>üßì ADULTOS MAYORES<br><small>60+ a√±os</small></div>
                            </div>
                            <div class="flashcard-back">
                              <div><strong>Fragilidad √≥sea:</strong> Un impacto a 30 km/h puede ser fatal. Menor circulaci√≥n cerebral = mayor riesgo.</div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="flashcard" onclick="flipCard(this)">
                          <div class="flashcard-inner">
                            <div class="flashcard-front">
                              <div>ü§∞ MUJERES EMBARAZADAS<br><small>Cualquier edad</small></div>
                            </div>
                            <div class="flashcard-back">
                              <div><strong>Doble vulnerabilidad:</strong> Impacto afecta madre y beb√©. Cintur√≥n mal puesto puede causar desprendimiento de placenta.</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí≠ Reflexi√≥n del Instructor:</strong><br>
                  "Cuando muestro estos n√∫meros, veo c√≥mo cambian las caras de mis estudiantes. Ya no es solo teor√≠a. Es la diferencia entre llegar a casa o no llegar nunca."
                </div>
                
                <div class="section-divider"></div>
                
                <div class="knowledge-check-container">
                  <div class="knowledge-check-header">
                    <h4>üß† Verificaci√≥n de Conocimientos</h4>
                    <p>Comprueba tu comprensi√≥n sobre la ense√±anza de velocidad:</p>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 1:</strong> ¬øCu√°l es la f√≥rmula correcta para calcular la distancia de frenado?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 0, 0, false)">
                        Distancia = Velocidad √ó Tiempo
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 0, 1, true)">
                        Distancia Total = Distancia de Reacci√≥n + Distancia de Frenado
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 0, 2, false)">
                        Distancia = Velocidad √∑ 2
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-1-0-0" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> La distancia total incluye tanto el tiempo de reacci√≥n como el tiempo de frenado efectivo del veh√≠culo.</p>
                    </div>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 2:</strong> ¬øPor qu√© la energ√≠a de impacto aumenta exponencialmente con la velocidad?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 1, 0, false)">
                        Porque la energ√≠a es proporcional a la velocidad
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 1, 1, true)">
                        Porque la energ√≠a aumenta con el CUADRADO de la velocidad
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(1, 0, 1, 2, false)">
                        Porque depende del peso del veh√≠culo
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-1-0-1" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> La energ√≠a cin√©tica se calcula como ¬Ωmv¬≤, donde v¬≤ significa que al doblar la velocidad, la energ√≠a se cuadruplica.</p>
                    </div>
                  </div>
                </div>
              </div>
            `
          },
          {
            type: "age-groups",
            content: `
              <h3>üéØ Adaptando "La Clase de Velocidad" por Edad</h3>
              <p>El mismo mensaje, diferentes enfoques seg√∫n tu audiencia:</p>
              
              <div class="age-group-tabs">
                <div class="age-tab active" onclick="showAgeContent('speed-teen')">üë¶ Adolescentes</div>
                <div class="age-tab" onclick="showAgeContent('speed-young')">üë® J√≥venes</div>
                <div class="age-tab" onclick="showAgeContent('speed-adult')">üëî Adultos</div>
                <div class="age-tab" onclick="showAgeContent('speed-senior')">üë¥ Mayores</div>
              </div>
              
              <div id="speed-teen" class="age-content active">
                <div class="interactive-demo">
                  <h4>üéÆ Tu Estrategia: Gamificaci√≥n de la F√≠sica</h4>
                  <div class="calculator-demo">
                    <h4>üßÆ "Calculadora de Consecuencias"</h4>
                    <p><strong>Ejercicio para la clase:</strong> Haz que calculen cu√°ntos metros recorren en el tiempo de reacci√≥n</p>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Velocidad que quieren manejar (km/h)</label>
                        <input type="number" id="teenSpeed" value="80" onchange="calculateTeenDemo()">
                      </div>
                      <div class="form-group">
                        <label>Tiempo de reacci√≥n (segundos)</label>
                        <input type="number" id="teenReaction" value="1.5" step="0.1" onchange="calculateTeenDemo()">
                      </div>
                    </div>
                    
                    <div id="teenResult" class="result-display">
                      En 1.5 segundos a 80 km/h recorres 33 metros a ciegas
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Pregunta clave:</strong> "¬øQu√© puede pasar en 33 metros que no veas?"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Adolescentes</h4>
                  <p><strong>"La velocidad no te hace cool, te hace estad√≠stica"</strong></p>
                </div>
              </div>
              
              <div id="speed-young" class="age-content">
                <div class="interactive-demo">
                  <h4>üí∞ Tu Estrategia: Calculadora de Costos Reales</h4>
                  <div class="calculator-demo">
                    <h4>üí∏ C√°lculo de Infracciones (Ley 769)</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Salario M√≠nimo Mensual ($)</label>
                        <input type="number" id="salarioMinimo" value="1300000" onchange="calculateFineDemo()">
                      </div>
                      <div class="form-group">
                        <label>Exceso de Velocidad</label>
                        <select id="excessSpeed" onchange="calculateFineDemo()" style="width: 100%; padding: 15px; border: 2px solid rgba(30, 64, 175, 0.2); border-radius: 12px; font-size: 16px;">
                          <option value="15">Hasta 30 km/h (15 SMMLV)</option>
                          <option value="30">30-60 km/h (30 SMMLV)</option>
                          <option value="45">M√°s de 60 km/h (45 SMMLV)</option>
                        </select>
                      </div>
                    </div>
                    
                    <div id="fineResult" class="result-display">
                      Multa: $19,500,000 + Aumento seguro + Tiempo perdido
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Costos adicionales:</strong></p>
                      <ul>
                        <li>Aumento del seguro: 30-50% anual</li>
                        <li>Tiempo perdido en tr√°mites: 2-3 d√≠as laborales</li>
                        <li>Costo de oportunidad profesional</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para J√≥venes</h4>
                  <p><strong>"Llegar 3 minutos antes no vale 3 meses de salario"</strong></p>
                </div>
              </div>
              
              <div id="speed-adult" class="age-content">
                <div class="interactive-demo">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Tu Estrategia: Historia Real Impactante</h4>
                  <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ef4444;">
                    <h4>üìñ Caso para Reflexi√≥n en Clase</h4>
                    <p><strong>Historia:</strong> "Carlos, padre de dos ni√±os, sali√≥ del trabajo para llegar a la obra de teatro de su hija. Iba con prisa..."</p>
                    
                    <div class="calculator-demo" style="margin-top: 15px;">
                      <h4>üßÆ Recrea el Escenario</h4>
                      <div class="input-group">
                        <div class="form-group">
                          <label>Velocidad de Carlos (km/h)</label>
                          <input type="number" id="carlosSpeed" value="90" onchange="calculateCarlosDemo()">
                        </div>
                        <div class="form-group">
                          <label>L√≠mite de velocidad (km/h)</label>
                          <input type="number" id="speedLimit" value="60" onchange="calculateCarlosDemo()">
                        </div>
                      </div>
                      
                      <div id="carlosResult" class="result-display">
                        Exceso: 30 km/h = 50% m√°s energ√≠a de impacto
                      </div>
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Pregunta para reflexi√≥n:</strong> "¬øVal√≠a la pena llegar 5 minutos antes?"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Adultos</h4>
                  <p><strong>"Tus hijos prefieren que llegues 5 minutos tarde a que no llegues nunca"</strong></p>
                </div>
              </div>
              
              <div id="speed-senior" class="age-content">
                <div class="interactive-demo">
                  <h4>üß† Tu Estrategia: Sabidur√≠a y Adaptaci√≥n</h4>
                  <div class="calculator-demo">
                    <h4>‚è±Ô∏è Calculadora de Adaptaci√≥n Natural</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Edad del conductor</label>
                        <input type="number" id="driverAge" value="65" onchange="calculateAgeDemo()">
                      </div>
                      <div class="form-group">
                        <label>Velocidad habitual (km/h)</label>
                        <input type="number" id="habitualSpeed" value="80" onchange="calculateAgeDemo()">
                      </div>
                    </div>
                    
                    <div id="ageResult" class="result-display">
                      Tiempo de reacci√≥n: +0.2s | Velocidad recomendada: 70 km/h
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Adaptaciones naturales despu√©s de los 60:</strong></p>
                      <ul>
                        <li>Tiempo de reacci√≥n: +0.2 segundos</li>
                        <li>Visi√≥n nocturna: -40%</li>
                        <li>Procesamiento: M√°s lento pero m√°s preciso</li>
                      </ul>
                      <p><strong>Estrategia:</strong> "Su experiencia compensa estos cambios naturales"</p>
                    </div>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Mayores</h4>
                  <p><strong>"La sabidur√≠a est√° en saber cu√°ndo ir m√°s despacio"</strong></p>
                </div>
              </div>
            `
          },
          {
            type: "quiz",
            question: "Un estudiante joven te dice: 'Pero profesor, siempre he manejado r√°pido y nunca me ha pasado nada'. ¬øCu√°l es tu mejor respuesta andrag√≥gica?",
            options: [
              { text: "Est√° bien, tienes experiencia suficiente", correct: false },
              { text: "Calculemos juntos: ¬øcu√°nto te costar√≠a una multa por exceso de velocidad en tu salario actual?", correct: true },
              { text: "Eres muy joven e irresponsable", correct: false },
              { text: "Deber√≠as manejar como los adultos mayores", correct: false }
            ],
            explanation: "La mejor estrategia andrag√≥gica es hacer que el estudiante reflexione sobre el impacto real en su vida. Al calcular juntos el costo econ√≥mico, el estudiante llega a la conclusi√≥n por s√≠ mismo, lo que es m√°s efectivo que imponer reglas o juzgar su comportamiento."
          }
        ]
      },
      {
        id: 3,
        icon: "üò¥",
        title: "Fatiga: Estrategias de Ense√±anza",
        description: "Preparando la clase sobre el enemigo invisible: La fatiga al volante",
        pages: [
          {
            type: "interactive",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>üò¥ Preparando "La Clase del Enemigo Invisible"</h3>
                  <p>Es mi√©rcoles. Hoy vas a ense√±ar sobre el factor m√°s traicionero: la fatiga. Tu desaf√≠o es hacer visible lo invisible, hacer que entiendan un peligro que no siempre reconocen.</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üò¥ El Problema</h3>
                      <p>La fatiga causa el 20% de accidentes mortales</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üß† La Realidad</h3>
                      <p>18 horas despierto = 0.05% alcohol en sangre (legalmente ebrio)</p>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üé≠ Demo Estrella: "Los 4 Segundos M√°s Largos"</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="interactive-demo">
                      <h4>üé¨ Ejercicio para tu Clase</h4>
                      <div class="calculator-demo">
                        <h4>‚è±Ô∏è Simulador de Microsue√±o</h4>
                        <p><strong>Instrucciones para el aula:</strong></p>
                        <ol>
                          <li>Pide a todos que cierren los ojos por 4 segundos</li>
                          <li>Mientras tanto, camina silenciosamente por el aula</li>
                          <li>Cuando abran los ojos, pregunta: "¬øD√≥nde estoy ahora?"</li>
                          <li>Calcula la distancia recorrida en microsue√±o:</li>
                        </ol>
                        
                        <div class="input-group">
                          <div class="form-group">
                            <label>Velocidad (km/h)</label>
                            <input type="number" id="fatigueSpeed" value="90" onchange="calculateMicrosleep()">
                          </div>
                          <div class="form-group">
                            <label>Duraci√≥n microsue√±o (segundos)</label>
                            <input type="number" id="microsleepTime" value="4" step="0.5" onchange="calculateMicrosleep()">
                          </div>
                        </div>
                        
                        <div id="microsleepResult" class="result-display">
                          En 4 segundos a 90 km/h recorres 100 metros completamente dormido
                        </div>
                        
                        <p style="margin-top: 15px;"><strong>Pregunta clave:</strong> "¬øQu√© puede pasar en 100 metros que no controles?"</p>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="flashcard-container">
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>üß† MICROSUE√ëO</div>
                      </div>
                      <div class="flashcard-back">
                        <div>3-4 segundos de sue√±o involuntario. A 90 km/h = 75-100 metros a ciegas. Suficiente para una tragedia.</div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>‚è∞ 18 HORAS</div>
                      </div>
                      <div class="flashcard-back">
                        <div>Estar despierto 18 horas equivale a 0.05% de alcohol en sangre. A las 24 horas = 0.10% (legalmente ebrio).</div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>‚òï MITO DEL CAF√â</div>
                      </div>
                      <div class="flashcard-back">
                        <div>El caf√© solo retrasa la fatiga 30-45 minutos. Despu√©s, el "crash" es peor. No es soluci√≥n real.</div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>üéµ M√öSICA ALTA</div>
                      </div>
                      <div class="flashcard-back">
                        <div>No previene microsue√±os. Puede crear falsa sensaci√≥n de alerta mientras el cerebro se desconecta.</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí≠ Reflexi√≥n del Instructor:</strong><br>
                  "La fatiga es el enemigo m√°s dif√≠cil de ense√±ar porque es invisible. Pero cuando hago el ejercicio de los 4 segundos, veo c√≥mo entienden que perder el control por un momento puede cambiarlo todo."
                </div>
                
                <div class="section-divider"></div>
                
                <div class="knowledge-check-container">
                  <div class="knowledge-check-header">
                    <h4>üß† Verificaci√≥n de Conocimientos</h4>
                    <p>Eval√∫a tu comprensi√≥n sobre la ense√±anza de fatiga:</p>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 1:</strong> ¬øCu√°ntas horas despierto equivalen a estar legalmente ebrio?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 0, 0, false)">
                        12 horas
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 0, 1, true)">
                        18 horas = 0.05%, 24 horas = 0.10%
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 0, 2, false)">
                        30 horas
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-2-0-0" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> Estar despierto 18 horas equivale a 0.05% de alcohol en sangre, y 24 horas a 0.10% (legalmente ebrio).</p>
                    </div>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 2:</strong> ¬øPor qu√© el caf√© NO es una soluci√≥n real para la fatiga al conducir?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 1, 0, false)">
                        Porque no tiene efecto
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 1, 1, true)">
                        Solo da 30-45 minutos de alerta, despu√©s viene un 'crash' peor
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(2, 0, 1, 2, false)">
                        Porque es peligroso para la salud
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-2-0-1" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> El caf√© solo enmascara temporalmente la fatiga, pero no elimina la necesidad de sue√±o, y el efecto rebote es peligroso.</p>
                    </div>
                  </div>
                </div>
                
                <div class="incomplete-section">
                  <h4>‚ö†Ô∏è Secci√≥n Pendiente de Completar</h4>
                  <p>Falta agregar: Ejercicios pr√°cticos espec√≠ficos para detectar microsue√±os en el aula</p>
                </div>
              </div>
            `
          },
          {
            type: "age-groups",
            content: `
              <h3>üéØ Adaptando "La Clase de Fatiga" por Edad</h3>
              <p>Cada grupo tiene diferentes patrones de sue√±o y factores de riesgo:</p>
              
              <div class="age-group-tabs">
                <div class="age-tab active" onclick="showAgeContent('fatigue-teen')">üë¶ Adolescentes</div>
                <div class="age-tab" onclick="showAgeContent('fatigue-young')">üë® J√≥venes</div>
                <div class="age-tab" onclick="showAgeContent('fatigue-adult')">üëî Adultos</div>
                <div class="age-tab" onclick="showAgeContent('fatigue-senior')">üë¥ Mayores</div>
              </div>
              
              <div id="fatigue-teen" class="age-content active">
                <div class="highlight-box info">
                  <h4>üß† Caracter√≠sticas del Sue√±o Adolescente</h4>
                  <p><strong>Ritmo circadiano diferente:</strong> Naturalmente se duermen m√°s tarde y despiertan m√°s tarde.</p>
                  <p><strong>Necesidad de sue√±o:</strong> 8-10 horas (m√°s que adultos)</p>
                  <p><strong>Privaci√≥n cr√≥nica:</strong> El 70% de adolescentes no duerme lo suficiente</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üì± Tu Estrategia: App de Monitoreo</h4>
                  <div class="calculator-demo">
                    <h4>üò¥ Calculadora de D√©ficit de Sue√±o</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Horas de sue√±o anoche</label>
                        <input type="number" id="teenSleep" value="6" step="0.5" onchange="calculateSleepDeficit()">
                      </div>
                      <div class="form-group">
                        <label>Horas necesarias (adolescente)</label>
                        <input type="number" id="neededSleep" value="9" readonly style="background: #f3f4f6;">
                      </div>
                    </div>
                    
                    <div id="sleepDeficitResult" class="result-display">
                      D√©ficit: 3 horas = Equivale a 0.03% alcohol en sangre
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Mensaje clave:</strong> "Tu cerebro a√∫n est√° en construcci√≥n y necesita m√°s combustible"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Estrategia de Ense√±anza</h4>
                  <ul>
                    <li>Explica que su cerebro necesita m√°s sue√±o para desarrollarse</li>
                    <li>Usa apps de monitoreo de sue√±o como gamificaci√≥n</li>
                    <li>Conecta con su vida social: "¬øPrefieres llegar tarde o no llegar?"</li>
                    <li>Historias de j√≥venes conductores que tuvieron accidentes por fatiga</li>
                  </ul>
                </div>
              </div>
              
              <div id="fatigue-young" class="age-content">
                <div class="highlight-box info">
                  <h4>üíº Realidad del Joven Adulto</h4>
                  <p><strong>M√∫ltiples responsabilidades:</strong> Trabajo, estudio, vida social</p>
                  <p><strong>Horarios irregulares:</strong> Turnos nocturnos, fiestas, madrugadas</p>
                  <p><strong>Falsa invencibilidad:</strong> "Puedo con todo"</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>‚ö° Tu Estrategia: Optimizaci√≥n del Rendimiento</h4>
                  <div class="calculator-demo">
                    <h4>üìä Calculadora de Productividad vs Fatiga</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Horas trabajadas hoy</label>
                        <input type="number" id="workHours" value="10" onchange="calculateProductivity()">
                      </div>
                      <div class="form-group">
                        <label>Horas de sue√±o anoche</label>
                        <input type="number" id="youngSleep" value="5" step="0.5" onchange="calculateProductivity()">
                      </div>
                    </div>
                    
                    <div id="productivityResult" class="result-display">
                      Rendimiento: 65% | Riesgo de accidente: +300%
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Mensaje clave:</strong> "Optimiza tu rendimiento: dormir bien es invertir en tu carrera"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Estrategia de Ense√±anza</h4>
                  <ul>
                    <li>Presenta la fatiga como p√©rdida de productividad</li>
                    <li>Ense√±a t√©cnicas de power nap (20 minutos)</li>
                    <li>Planificaci√≥n de viajes seg√∫n horarios de trabajo</li>
                    <li>Alternativas: transporte p√∫blico, apps de transporte</li>
                  </ul>
                </div>
              </div>
              
              <div id="fatigue-adult" class="age-content">
                <div class="highlight-box info">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Presiones del Adulto</h4>
                  <p><strong>Responsabilidades familiares:</strong> Ni√±os, trabajo, hogar</p>
                  <p><strong>Estr√©s cr√≥nico:</strong> Afecta la calidad del sue√±o</p>
                  <p><strong>Medicamentos:</strong> Algunos causan somnolencia</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Tu Estrategia: Protecci√≥n Familiar</h4>
                  <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ef4444;">
                    <h4>üíî Caso para Reflexi√≥n</h4>
                    <p><strong>Historia:</strong> "Mar√≠a, madre de dos ni√±os, trabaj√≥ doble turno para pagar la matr√≠cula escolar. Manejando a casa a las 2 AM..."</p>
                    
                    <div class="calculator-demo" style="margin-top: 15px;">
                      <h4>üò¥ Recrea el Nivel de Fatiga</h4>
                      <div class="input-group">
                        <div class="form-group">
                          <label>Horas despierta</label>
                          <input type="number" id="awakeHours" value="20" onchange="calculateFatigueLevel()">
                        </div>
                        <div class="form-group">
                          <label>Nivel de estr√©s (1-10)</label>
                          <input type="number" id="stressLevel" value="8" min="1" max="10" onchange="calculateFatigueLevel()">
                        </div>
                      </div>
                      
                      <div id="fatigueResult" class="result-display">
                        Equivale a 0.08% alcohol + factor estr√©s = ALTO RIESGO
                      </div>
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Pregunta para reflexi√≥n:</strong> "¬øQu√© hubiera pasado con sus hijos si no llegaba a casa?"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Estrategia de Ense√±anza</h4>
                  <ul>
                    <li>Enfatiza el impacto en la familia si algo pasa</li>
                    <li>Ense√±a a reconocer efectos de medicamentos</li>
                    <li>Planificaci√≥n familiar de viajes largos</li>
                    <li>Importancia del ejemplo para los hijos</li>
                  </ul>
                </div>
              </div>
              
              <div id="fatigue-senior" class="age-content">
                <div class="highlight-box info">
                  <h4>üßì Cambios Naturales del Envejecimiento</h4>
                  <p><strong>Sue√±o fragmentado:</strong> Despertares nocturnos m√°s frecuentes</p>
                  <p><strong>Medicamentos:</strong> Mayor probabilidad de efectos sedantes</p>
                  <p><strong>Condiciones m√©dicas:</strong> Apnea del sue√±o, diabetes, etc.</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üß† Tu Estrategia: Sabidur√≠a y Adaptaci√≥n</h4>
                  <div class="calculator-demo">
                    <h4>üíä Calculadora de Efectos Medicamentos</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>N√∫mero de medicamentos</label>
                        <input type="number" id="medications" value="3" onchange="calculateMedicationEffect()">
                      </div>
                      <div class="form-group">
                        <label>Calidad del sue√±o (1-10)</label>
                        <input type="number" id="sleepQuality" value="6" min="1" max="10" onchange="calculateMedicationEffect()">
                      </div>
                    </div>
                    
                    <div id="medicationResult" class="result-display">
                      Riesgo de somnolencia: MODERADO | Horario √≥ptimo: 10 AM - 4 PM
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Mensaje clave:</strong> "Su experiencia les ayuda a reconocer sus l√≠mites mejor que los j√≥venes"</p>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üéØ Estrategia de Ense√±anza</h4>
                  <ul>
                    <li>Valora su experiencia en reconocer l√≠mites</li>
                    <li>Educaci√≥n sobre efectos de medicamentos</li>
                    <li>Horarios √≥ptimos de conducci√≥n (evitar atardecer)</li>
                    <li>Importancia de chequeos m√©dicos regulares</li>
                  </ul>
                </div>
              </div>
            `
          },
          {
            type: "quiz",
            question: "Un estudiante adulto te dice: 'Siempre tomo caf√© cuando estoy cansado y funciona'. ¬øCu√°l es tu mejor respuesta como instructor andrag√≥gico?",
            options: [
              { text: "Est√° bien, el caf√© es efectivo contra la fatiga", correct: false },
              { text: "Calculemos juntos: el caf√© te da 30 minutos de alerta, pero despu√©s viene un 'crash' peor. ¬øVale la pena el riesgo?", correct: true },
              { text: "Mejor tome bebidas energ√©ticas que duran m√°s", correct: false },
              { text: "Combine caf√© con m√∫sica alta para mejor efecto", correct: false }
            ],
            explanation: "La estrategia andrag√≥gica efectiva es hacer que el estudiante reflexione sobre la efectividad real del caf√©. Al calcular juntos el tiempo de efecto versus el riesgo posterior, el estudiante comprende por s√≠ mismo que no es una soluci√≥n real, lo que genera un aprendizaje m√°s duradero."
          }
        ]
      },
      {
        id: 4,
        icon: "üì±",
        title: "Distracci√≥n: M√©todos de Ense√±anza",
        description: "Preparando la clase m√°s desafiante: Combatir la adicci√≥n digital al volante",
        pages: [
          {
            type: "interactive",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>üì± Preparando "La Clase Anti-Distracci√≥n"</h3>
                  <p>Es viernes. Tu clase m√°s desafiante: ense√±ar sobre distracci√≥n a generaciones que viven conectadas 24/7. No es solo hablar del celular, es cambiar un h√°bito m√°s arraigado que el cintur√≥n de seguridad.</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üìä El Desaf√≠o</h3>
                      <p>9 de cada 10 conductores usan el celular mientras conducen</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üí° Tu Misi√≥n</h3>
                      <p>Cambiar un h√°bito que est√° m√°s arraigado que usar cintur√≥n</p>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üéØ Demo Estrella: "Los 5 Segundos Mortales"</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="interactive-demo">
                      <h4>üì± Simulador de Distracci√≥n</h4>
                      <div class="calculator-demo">
                        <h4>‚è±Ô∏è ¬øCu√°nto Tiempo Toma Leer un Mensaje?</h4>
                        <p><strong>Ejercicio para la clase:</strong> Cronometra mientras leen un mensaje real</p>
                        
                        <div class="input-group">
                          <div class="form-group">
                            <label>Tiempo leyendo mensaje (segundos)</label>
                            <input type="number" id="messageTime" value="5" step="0.5" onchange="calculateDistraction()">
                          </div>
                          <div class="form-group">
                            <label>Velocidad (km/h)</label>
                            <input type="number" id="distractionSpeed" value="100" onchange="calculateDistraction()">
                          </div>
                        </div>
                        
                        <div id="distractionResult" class="result-display">
                          En 5 segundos a 100 km/h recorres 139 metros completamente a ciegas
                        </div>
                        
                        <div style="margin-top: 20px; background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                          <p><strong>Actividad f√≠sica:</strong> Sal al patio y mide 139 metros</p>
                          <p><strong>Pregunta clave:</strong> "¬øQu√© puede pasar en esta distancia?"</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üß† Los 4 Tipos de Distracci√≥n: Demos Interactivas</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="flashcard-container">
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üëÅÔ∏è VISUAL<br><small>Apartar los ojos</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Demo:</strong> Haz que cierren los ojos 5 segundos mientras caminas. "¬øD√≥nde estoy ahora? En la v√≠a, no sabr√≠an d√≥nde est√°n los dem√°s."</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üéß AUDITIVA<br><small>No escuchar</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Demo:</strong> Pon m√∫sica alta y haz que identifiquen sonidos (sirenas, bocinas). "¬øEscucharon la ambulancia? Esos sonidos salvan vidas."</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>‚úã MANUAL<br><small>Soltar el volante</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Demo:</strong> Simula una emergencia: "¬°Frena YA!" mientras tienen las manos ocupadas. "¬øPudieron reaccionar a tiempo?"</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üß† COGNITIVA<br><small>Pensar en otra cosa</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Demo:</strong> Haz que resuelvan matem√°ticas mientras observan un video de tr√°fico. "¬øVieron al peat√≥n? Su mente estaba en otro lado."</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí≠ Reflexi√≥n del Instructor:</strong><br>
                  "La distracci√≥n es el tema m√°s dif√≠cil porque estoy pidiendo que cambien algo que hacen autom√°ticamente. Pero cuando ven f√≠sicamente los 139 metros, entienden que no es solo una regla, es supervivencia."
                </div>
                
                <div class="section-divider"></div>
                
                <div class="knowledge-check-container">
                  <div class="knowledge-check-header">
                    <h4>üß† Verificaci√≥n de Conocimientos</h4>
                    <p>Confirma tu dominio sobre la ense√±anza anti-distracci√≥n:</p>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 1:</strong> ¬øCu√°les son los 4 tipos de distracci√≥n al conducir?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 0, 0, true)">
                        Visual, auditiva, manual y cognitiva
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 0, 1, false)">
                        Celular, radio, pasajeros y comida
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 0, 2, false)">
                        Interna, externa, f√≠sica y mental
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-3-0-0" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> Los 4 tipos son: Visual (apartar los ojos), Auditiva (no escuchar), Manual (soltar el volante) y Cognitiva (pensar en otra cosa).</p>
                    </div>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 2:</strong> ¬øCu√°ntos metros recorres a ciegas en 5 segundos a 100 km/h?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 1, 0, false)">
                        100 metros
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 1, 1, true)">
                        139 metros
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(3, 0, 1, 2, false)">
                        200 metros
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-3-0-1" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> A 100 km/h recorres 27.8 metros por segundo, entonces en 5 segundos son aproximadamente 139 metros.</p>
                    </div>
                  </div>
                </div>
                
                <div class="incomplete-section">
                  <h4>‚ö†Ô∏è Secci√≥n Pendiente de Completar</h4>
                  <p>Falta agregar: Simuladores espec√≠ficos para demostrar cada tipo de distracci√≥n en el aula</p>
                </div>
              </div>
            `
          },
          {
            type: "age-groups",
            content: `
              <h3>üéØ Adaptando "La Clase Anti-Distracci√≥n" por Edad</h3>
              <p>Cada generaci√≥n tiene una relaci√≥n diferente con la tecnolog√≠a:</p>
              
              <div class="age-group-tabs">
                <div class="age-tab active" onclick="showAgeContent('distraction-teen')">üë¶ Adolescentes</div>
                <div class="age-tab" onclick="showAgeContent('distraction-young')">üë® J√≥venes</div>
                <div class="age-tab" onclick="showAgeContent('distraction-adult')">üëî Adultos</div>
                <div class="age-tab" onclick="showAgeContent('distraction-senior')">üë¥ Mayores</div>
              </div>
              
              <div id="distraction-teen" class="age-content active">
                <div class="scenario-card">
                  <h4>üì± Su Realidad Digital</h4>
                  <p><strong>Nativos digitales:</strong> Reciben 150+ notificaciones diarias</p>
                  <p><strong>FOMO:</strong> Miedo a perderse algo importante</p>
                  <p><strong>Multitarea:</strong> Creen que pueden hacer varias cosas a la vez</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üéÆ Tu Estrategia: Gamificaci√≥n Anti-Distracci√≥n</h4>
                  <div class="calculator-demo">
                    <h4>üìä "Reto de Conducci√≥n Limpia"</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Notificaciones por hora</label>
                        <input type="number" id="notifications" value="15" onchange="calculateNotificationImpact()">
                      </div>
                      <div class="form-group">
                        <label>Duraci√≥n del viaje (minutos)</label>
                        <input type="number" id="tripDuration" value="30" onchange="calculateNotificationImpact()">
                      </div>
                    </div>
                    
                    <div id="notificationResult" class="result-display">
                      En 30 minutos recibir√°s 7.5 notificaciones = 7.5 oportunidades de accidente
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Propuesta del Reto:</strong></p>
                      <ul>
                        <li>App que detecta uso del celular mientras conduce</li>
                        <li>Puntos por viajes sin distracciones</li>
                        <li>Ranking entre amigos</li>
                        <li>Premios por semanas consecutivas sin infracciones</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <h4>üí° Frases Clave para Adolescentes</h4>
                  <ul>
                    <li><strong>"Es como jugar videojuegos con lag"</strong></li>
                    <li><strong>"Los conductores pro no necesitan el celular"</strong></li>
                    <li><strong>"¬øVale la pena un like por tu vida?"</strong></li>
                    <li><strong>"Los conductores cool no textean"</strong></li>
                  </ul>
                </div>
              </div>
              
              <div id="distraction-young" class="age-content">
                <div class="scenario-card">
                  <h4>üíº Su Realidad Profesional</h4>
                  <p><strong>Trabajo 24/7:</strong> Emails, llamadas, WhatsApp de trabajo</p>
                  <p><strong>Presi√≥n laboral:</strong> "Debo responder inmediatamente"</p>
                  <p><strong>Multitarea profesional:</strong> Acostumbrados a hacer varias cosas</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üí∞ Tu Estrategia: Calculadora de Riesgo Profesional</h4>
                  <div class="calculator-demo">
                    <h4>üìà Costo-Beneficio de Responder Mensajes</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Salario mensual ($)</label>
                        <input type="number" id="monthlySalary" value="3000000" onchange="calculateProfessionalRisk()">
                      </div>
                      <div class="form-group">
                        <label>Importancia del mensaje (1-10)</label>
                        <input type="number" id="messageImportance" value="5" min="1" max="10" onchange="calculateProfessionalRisk()">
                      </div>
                    </div>
                    
                    <div id="professionalRiskResult" class="result-display">
                      Beneficio: $0 | Riesgo: Perder trabajo + multa $19,500,000
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>An√°lisis de Riesgo:</strong></p>
                      <ul>
                        <li>Costo de accidente: $50-200 millones</li>
                        <li>P√©rdida de trabajo por antecedentes</li>
                        <li>Aumento de seguros: 50-100%</li>
                        <li>Tiempo perdido en tr√°mites legales</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <h4>üí° Frases Clave para J√≥venes</h4>
                  <ul>
                    <li><strong>"Tu carrera no vale un mensaje"</strong></li>
                    <li><strong>"Invertir en seguridad es rentable"</strong></li>
                    <li><strong>"Llegar seguro es llegar productivo"</strong></li>
                    <li><strong>"Los profesionales planifican sus comunicaciones"</strong></li>
                  </ul>
                </div>
              </div>
              
              <div id="distraction-adult" class="age-content">
                <div class="scenario-card">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Su Realidad Familiar</h4>
                  <p><strong>Coordinaci√≥n familiar:</strong> Llamadas sobre ni√±os, citas m√©dicas</p>
                  <p><strong>Emergencias:</strong> "¬øY si es urgente?"</p>
                  <p><strong>Ejemplo para hijos:</strong> Los ni√±os imitan comportamientos</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üë∂ Tu Estrategia: El Ejemplo que Das</h4>
                  <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ef4444;">
                    <h4>üìπ Video Mental para la Clase</h4>
                    <p><strong>Ejercicio de Visualizaci√≥n:</strong></p>
                    <p>"Imaginen que est√°n grabando un video de ustedes manejando. Sus hijos est√°n viendo. ¬øQu√© ven cuando suena el celular?"</p>
                    
                    <div class="calculator-demo" style="margin-top: 15px;">
                      <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Calculadora de Impacto Familiar</h4>
                      <div class="input-group">
                        <div class="form-group">
                          <label>Edad del hijo mayor</label>
                          <input type="number" id="childAge" value="12" onchange="calculateFamilyImpact()">
                        </div>
                        <div class="form-group">
                          <label>Veces que usa celular manejando (por semana)</label>
                          <input type="number" id="phoneUsage" value="10" onchange="calculateFamilyImpact()">
                        </div>
                      </div>
                      
                      <div id="familyImpactResult" class="result-display">
                        Tu hijo ver√° 520 ejemplos negativos al a√±o
                      </div>
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Estad√≠stica impactante:</strong> "Hijos de padres distra√≠dos tienen 2x m√°s accidentes"</p>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <h4>üí° Frases Clave para Adultos</h4>
                  <ul>
                    <li><strong>"Tus hijos aprenden m√°s de lo que haces que de lo que dices"</strong></li>
                    <li><strong>"Protege a quienes amas"</strong></li>
                    <li><strong>"Las verdaderas emergencias son raras"</strong></li>
                    <li><strong>"¬øQu√© ejemplo quieres que aprendan?"</strong></li>
                  </ul>
                </div>
              </div>
              
              <div id="distraction-senior" class="age-content">
                <div class="scenario-card">
                  <h4>üßì Su Realidad Tecnol√≥gica</h4>
                  <p><strong>Adaptaci√≥n gradual:</strong> Menos familiaridad con tecnolog√≠a</p>
                  <p><strong>Concentraci√≥n √∫nica:</strong> Prefieren hacer una cosa a la vez</p>
                  <p><strong>Prudencia natural:</strong> M√°s conscientes de sus limitaciones</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üß† Tu Estrategia: Su Sabidur√≠a es su Ventaja</h4>
                  <div class="calculator-demo">
                    <h4>üéØ Calculadora de Ventaja Generacional</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>A√±os de experiencia conduciendo</label>
                        <input type="number" id="drivingExperience" value="40" onchange="calculateGenerationalAdvantage()">
                      </div>
                      <div class="form-group">
                        <label>Uso de celular mientras conduce (1-10)</label>
                        <input type="number" id="seniorPhoneUse" value="2" min="1" max="10" onchange="calculateGenerationalAdvantage()">
                      </div>
                    </div>
                    
                    <div id="generationalResult" class="result-display">
                      Ventaja: 40 a√±os de experiencia + baja distracci√≥n = CONDUCTOR SABIO
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Sus Fortalezas:</strong></p>
                      <ul>
                        <li>Saben concentrarse en una tarea</li>
                        <li>Menos presi√≥n social por responder inmediatamente</li>
                        <li>Experiencia para reconocer situaciones peligrosas</li>
                        <li>Prudencia natural desarrollada con los a√±os</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <h4>üí° Frases Clave para Mayores</h4>
                  <ul>
                    <li><strong>"Su experiencia les da ventaja sobre las distracciones"</strong></li>
                    <li><strong>"Ustedes entienden la importancia de la concentraci√≥n"</strong></li>
                    <li><strong>"Sean el ejemplo para las nuevas generaciones"</strong></li>
                    <li><strong>"Su sabidur√≠a es su mejor tecnolog√≠a"</strong></li>
                  </ul>
                </div>
              </div>
            `
          },
          {
            type: "quiz",
            question: "Un estudiante joven te dice: 'Pero necesito responder mensajes de trabajo mientras conduzco'. ¬øCu√°l es tu mejor respuesta andrag√≥gica?",
            options: [
              { text: "Est√° bien si son mensajes cortos", correct: false },
              { text: "Calculemos juntos: ¬øvale la pena arriesgar tu carrera profesional por responder 30 segundos antes?", correct: true },
              { text: "Usa comandos de voz, es m√°s seguro", correct: false },
              { text: "Solo hazlo en sem√°foros rojos", correct: false }
            ],
            explanation: "La estrategia andrag√≥gica efectiva es hacer que el estudiante reflexione sobre el costo-beneficio real. Al calcular juntos el riesgo profesional versus el beneficio m√≠nimo de responder inmediatamente, el estudiante llega a la conclusi√≥n por s√≠ mismo, lo que genera un cambio de comportamiento m√°s duradero."
          }
        ]
      },
      {
        id: 5,
        icon: "ü™ñ",
        title: "Casco: Pedagog√≠a de la Protecci√≥n",
        description: "Preparando la clase m√°s personal: El casco como seguro de vida",
        pages: [
          {
            type: "story",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>ü™ñ Preparando "La Clase del Seguro de Vida"</h3>
                  <p>Hoy es tu clase m√°s personal. Vas a hablar del casco, pero no como accesorio obligatorio, sino como la diferencia entre que una familia tenga cena esta noche o llore para siempre.</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üìä Estad√≠stica</h3>
                      <p>El casco reduce 37% las muertes y 69% las lesiones cerebrales</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üíî Realidad</h3>
                      <p>Cada d√≠a, 15 motociclistas mueren en Colombia. 11 podr√≠an salvarse con casco</p>
                    </div>
                  </div>
                </div>
                
                <div class="stats-grid">
                  <div class="stat-card">
                    <div class="stat-number">75%</div>
                    <div class="stat-label">De muertes en moto son por trauma craneal</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">85%</div>
                    <div class="stat-label">Del impacto absorbe un casco certificado</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">15 km/h</div>
                    <div class="stat-label">Velocidad m√≠nima para lesi√≥n cerebral fatal</div>
                  </div>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>ü•ö Demo Estrella: El Experimento del Huevo</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="interactive-demo">
                      <h4>üß™ Preparaci√≥n para tu Demostraci√≥n</h4>
                      <div style="background: rgba(30, 64, 175, 0.1); padding: 20px; border-radius: 12px;">
                        <p><strong>Materiales necesarios:</strong></p>
                        <ul>
                          <li>2 huevos crudos</li>
                          <li>Casco de motocicleta</li>
                          <li>Superficie dura (concreto)</li>
                          <li>Toallas para limpiar</li>
                          <li>C√°mara para grabar (opcional)</li>
                        </ul>
                        
                        <p><strong>Procedimiento dram√°tico:</strong></p>
                        <ol>
                          <li><strong>Preparaci√≥n emocional:</strong> "Este huevo es como el cerebro de alguien que aman"</li>
                          <li><strong>Primer huevo:</strong> "Sin protecci√≥n" - d√©jalo caer desde 1 metro</li>
                          <li><strong>Pausa dram√°tica:</strong> Observen el resultado en silencio</li>
                          <li><strong>Segundo huevo:</strong> "Con casco" - col√≥calo dentro del casco y d√©jalo caer</li>
                          <li><strong>Pregunta clave:</strong> "¬øCu√°l huevo quieren que sea el cerebro de su ser querido?"</li>
                        </ol>
                      </div>
                      
                      <div class="calculator-demo">
                        <h4>üß† Calculadora de Impacto Cerebral</h4>
                        
                        <div class="input-group">
                          <div class="form-group">
                            <label>Altura de ca√≠da (metros)</label>
                            <input type="number" id="fallHeight" value="1" step="0.1" onchange="calculateBrainImpact()">
                          </div>
                          <div class="form-group">
                            <label>Velocidad equivalente (km/h)</label>
                            <input type="number" id="impactSpeed" value="15" readonly style="background: #f3f4f6;">
                          </div>
                        </div>
                        
                        <div id="brainImpactResult" class="result-display">
                          Energ√≠a de impacto: 49 Joules = Suficiente para fractura craneal
                        </div>
                      </div>
                    </div>
                    
                    <div class="character-bubble">
                      <strong>üß† Explicaci√≥n Cient√≠fica Simple:</strong><br>
                      "Tu cerebro flota en l√≠quido dentro del cr√°neo. En un impacto, tu cabeza se detiene pero tu cerebro sigue movi√©ndose, golpeando el interior del cr√°neo. El casco absorbe y distribuye esa energ√≠a mortal."
                    </div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí≠ Reflexi√≥n del Instructor:</strong><br>
                  "Cuando hago el experimento del huevo, el aula queda en silencio total. Ese momento de silencio vale m√°s que mil estad√≠sticas. Ah√≠ entienden que no estoy hablando de reglas, estoy hablando de vidas."
                </div>
                
                <div class="section-divider"></div>
                
                <div class="knowledge-check-container">
                  <div class="knowledge-check-header">
                    <h4>üß† Verificaci√≥n de Conocimientos</h4>
                    <p>Verifica tu comprensi√≥n sobre la pedagog√≠a del casco:</p>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 1:</strong> ¬øEn qu√© porcentaje reduce el casco las muertes en motocicleta?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 0, 0, false)">
                        25%
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 0, 1, true)">
                        37% las muertes y 69% las lesiones cerebrales
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 0, 2, false)">
                        50%
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-4-0-0" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> Estudios demuestran que el casco reduce 37% las muertes y 69% las lesiones cerebrales graves.</p>
                    </div>
                  </div>
                  
                  <div class="knowledge-question">
                    <p><strong>Pregunta 2:</strong> ¬øA qu√© velocidad m√≠nima puede ocurrir una lesi√≥n cerebral fatal?</p>
                    <div class="knowledge-options">
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 1, 0, false)">
                        30 km/h
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 1, 1, true)">
                        15 km/h
                      </div>
                      <div class="knowledge-option" onclick="selectKnowledgeOption(4, 0, 1, 2, false)">
                        50 km/h
                      </div>
                    </div>
                    <div class="knowledge-feedback" id="feedback-4-0-1" style="display: none;">
                      <p><strong>üí° Explicaci√≥n:</strong> Una ca√≠da o impacto a solo 15 km/h puede generar suficiente energ√≠a para causar lesiones cerebrales fatales.</p>
                    </div>
                  </div>
                </div>
                
                <div class="incomplete-section">
                  <h4>‚ö†Ô∏è Secci√≥n Pendiente de Completar</h4>
                  <p>Falta agregar: Gu√≠a paso a paso para realizar el experimento del huevo de forma segura en el aula</p>
                </div>
              </div>
            `
          },
          {
            type: "age-groups",
            content: `
              <h3>üéØ Adaptando "La Clase del Casco" por Edad</h3>
              <p>Cada grupo tiene diferentes resistencias y motivaciones:</p>
              
              <div class="age-group-tabs">
                <div class="age-tab active" onclick="showAgeContent('helmet-teen')">üë¶ Adolescentes</div>
                <div class="age-tab" onclick="showAgeContent('helmet-young')">üë® J√≥venes</div>
                <div class="age-tab" onclick="showAgeContent('helmet-adult')">üëî Adultos</div>
                <div class="age-tab" onclick="showAgeContent('helmet-senior')">üë¥ Mayores</div>
              </div>
              
              <div id="helmet-teen" class="age-content active">
                <div class="scenario-card">
                  <h4>üòé Su Mentalidad: "Se Ve Feo"</h4>
                  <p><strong>Preocupaciones:</strong> Imagen, cabello, aceptaci√≥n social</p>
                  <p><strong>Resistencias:</strong> "Me veo rid√≠culo", "Arruina mi peinado"</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üì∏ Tu Estrategia: "Galer√≠a de la Realidad"</h4>
                  <div style="background: rgba(30, 64, 175, 0.1); padding: 20px; border-radius: 12px;">
                    <p><strong>Actividad: "Antes y Despu√©s"</strong></p>
                    <div class="vehicle-demo">
                      <div style="text-align: center; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 10px; margin: 10px;">
                        <div style="font-size: 32px;">üòé</div>
                        <p><strong>Imagen 1:</strong> Joven atractivo sin casco</p>
                      </div>
                      <div style="text-align: center; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 10px; margin: 10px;">
                        <div style="font-size: 32px;">ü™ñ</div>
                        <p><strong>Imagen 2:</strong> Casco moderno, deportivo, con dise√±os cool</p>
                      </div>
                      <div style="text-align: center; padding: 15px; background: rgba(239, 68, 68, 0.1); border-radius: 10px; margin: 10px;">
                        <div style="font-size: 32px;">üè•</div>
                        <p><strong>Imagen 3:</strong> Consecuencias reales (censurado pero impactante)</p>
                      </div>
                    </div>
                    <p><strong>Pregunta clave:</strong> "¬øCu√°l imagen quieres que sea tu futuro?"</p>
                  </div>
                </div>
                
                <div class="flashcard-container">
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>üòé "SE VE FEO"</div>
                      </div>
                      <div class="flashcard-back">
                        <div>"¬øSabes qu√© se ve realmente feo? Una silla de ruedas a los 17 a√±os. ¬øSabes qu√© se ve cool? Llegar vivo a casa."</div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                      <div class="flashcard-front">
                        <div>üíá "ARRUINA MI CABELLO"</div>
                      </div>
                      <div class="flashcard-back">
                        <div>"El cabello crece. Las neuronas no. Prefiero cabello despeinado que cerebro da√±ado."</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Adolescentes</h4>
                  <p><strong>"Los cascos modernos son cool. Las cicatrices cerebrales no."</strong></p>
                </div>
              </div>
              
              <div id="helmet-young" class="age-content">
                <div class="scenario-card">
                  <h4>üíº Su Mentalidad: "Viajes Cortos"</h4>
                  <p><strong>Justificaciones:</strong> "Solo voy a la esquina", "Es un trayecto corto"</p>
                  <p><strong>Realidad:</strong> 80% de accidentes ocurren a menos de 25 km del hogar</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üìä Tu Estrategia: Mapa de Riesgo Personal</h4>
                  <div class="calculator-demo">
                    <h4>üó∫Ô∏è Calculadora de Riesgo por Ruta</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Distancia casa-trabajo (km)</label>
                        <input type="number" id="workDistance" value="5" onchange="calculateRouteRisk()">
                      </div>
                      <div class="form-group">
                        <label>Viajes por semana</label>
                        <input type="number" id="weeklyTrips" value="10" onchange="calculateRouteRisk()">
                      </div>
                    </div>
                    
                    <div id="routeRiskResult" class="result-display">
                      Exposici√≥n semanal: 50 km sin casco = 50 oportunidades de tragedia
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Ejercicio personalizado:</strong></p>
                      <ol>
                        <li>Mapea sus rutas diarias (trabajo, universidad, ocio)</li>
                        <li>Identifica puntos de riesgo en cada ruta</li>
                        <li>Calcula: "¬øEn cu√°ntos puntos de riesgo pasas sin casco?"</li>
                        <li>Muestra estad√≠sticas de accidentes en esas zonas espec√≠ficas</li>
                      </ol>
                    </div>
                  </div>
                </div>
                
                <div class="certificate-actions">
                  <div class="button-group" style="margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="printCertificate()">
                      üñ®Ô∏è Imprimir Certificado
                    </button>
                  </div>
                </div>
                
                <div class="highlight-box info">
                  <h4>üí∞ Argumento Econ√≥mico ROI del Casco</h4>
                  <div class="calculator-demo">
                    <h4>üí∏ Calculadora de Retorno de Inversi√≥n</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>Costo del casco ($)</label>
                        <input type="number" id="helmetCost" value="300000" onchange="calculateHelmetROI()">
                      </div>
                      <div class="form-group">
                        <label>Costo lesi√≥n cerebral ($)</label>
                        <input type="number" id="injuryCost" value="100000000" readonly style="background: #f3f4f6;">
                      </div>
                    </div>
                    
                    <div id="helmetROIResult" class="result-display">
                      ROI del casco: 33,233% - La mejor inversi√≥n de tu vida
                    </div>
                  </div>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para J√≥venes</h4>
                  <p><strong>"El peligro no avisa si es viaje corto o largo"</strong></p>
                </div>
              </div>
              
              <div id="helmet-adult" class="age-content">
                <div class="scenario-card">
                  <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Su Mentalidad: "Soy Experimentado"</h4>
                  <p><strong>Confianza excesiva:</strong> "Llevo 20 a√±os manejando moto"</p>
                  <p><strong>Responsabilidad familiar:</strong> Tienen mucho que perder</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üë∂ Tu Estrategia: El Ejemplo que Das</h4>
                  <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #ef4444;">
                    <h4>üíî Reflexi√≥n Familiar Profunda</h4>
                    <div class="calculator-demo">
                      <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Calculadora de Impacto Familiar</h4>
                      
                      <div class="input-group">
                        <div class="form-group">
                          <label>N√∫mero de hijos</label>
                          <input type="number" id="numberOfKids" value="2" onchange="calculateFamilyHelmetImpact()">
                        </div>
                        <div class="form-group">
                          <label>Veces por semana que te ven sin casco</label>
                          <input type="number" id="helmetlessRides" value="5" onchange="calculateFamilyHelmetImpact()">
                        </div>
                      </div>
                      
                      <div id="familyHelmetResult" class="result-display">
                        Tus hijos ven 260 ejemplos negativos al a√±o
                      </div>
                    </div>
                    
                    <p style="margin-top: 15px;"><strong>Preguntas para reflexi√≥n:</strong></p>
                    <ul>
                      <li>"¬øQu√© le dir√≠as a tu hijo si no usa casco?"</li>
                      <li>"¬øC√≥mo explicar√≠as a tu familia que no usaste protecci√≥n?"</li>
                      <li>"¬øQui√©n cuidar√° a tus hijos si algo te pasa?"</li>
                    </ul>
                    
                    <p><strong>Estad√≠stica impactante:</strong> "Los hijos de padres que no usan casco tienen 3 veces m√°s probabilidad de no usarlo"</p>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üéØ Enfoque de Responsabilidad:</strong><br>
                  "Tu experiencia te ha mantenido vivo hasta ahora. El casco garantiza que sigas vivo para tu familia."
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Adultos</h4>
                  <p><strong>"No uses casco por ti. √ösalo por ellos."</strong></p>
                </div>
              </div>
              
              <div id="helmet-senior" class="age-content">
                <div class="scenario-card">
                  <h4>üßì Su Mentalidad: "Toda la Vida Sin Casco"</h4>
                  <p><strong>Resistencia al cambio:</strong> "Antes no se usaba y no pasaba nada"</p>
                  <p><strong>Orgullo generacional:</strong> "Los de mi √©poca somos m√°s cuidadosos"</p>
                </div>
                
                <div class="interactive-demo">
                  <h4>üìà Tu Estrategia: Evoluci√≥n de la Seguridad</h4>
                  <div class="calculator-demo">
                    <h4>üö¶ Calculadora de Evoluci√≥n del Tr√°fico</h4>
                    
                    <div class="input-group">
                      <div class="form-group">
                        <label>A√±os conduciendo</label>
                        <input type="number" id="yearsRiding" value="40" onchange="calculateTrafficEvolution()">
                      </div>
                      <div class="form-group">
                        <label>Veh√≠culos cuando empez√≥ (miles)</label>
                        <input type="number" id="oldVehicles" value="100" onchange="calculateTrafficEvolution()">
                      </div>
                    </div>
                    
                    <div id="trafficEvolutionResult" class="result-display">
                      Aumento del tr√°fico: 1000% m√°s veh√≠culos que hace 40 a√±os
                    </div>
                    
                    <div style="margin-top: 15px; background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                      <p><strong>Comparaci√≥n Generacional:</strong></p>
                      <ul>
                        <li><strong>Antes:</strong> Menos tr√°fico, velocidades menores, menos veh√≠culos</li>
                        <li><strong>Ahora:</strong> 10x m√°s veh√≠culos, velocidades mayores, conductores distra√≠dos</li>
                        <li><strong>Analog√≠a:</strong> "Como los cinturones en los carros, el casco evolucion√≥ por necesidad"</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <h4>üèÜ Enfoque de Sabidur√≠a</h4>
                  <p>"Ustedes han visto c√≥mo ha cambiado el tr√°fico. Su experiencia les dice que ahora es m√°s peligroso. El casco es adaptarse sabiamente a los nuevos tiempos."</p>
                </div>
                
                <div class="scenario-card">
                  <h4>üí° Frase Clave para Mayores</h4>
                  <p><strong>"Su sabidur√≠a + protecci√≥n moderna = combinaci√≥n perfecta"</strong></p>
                </div>
              </div>
            `
          }
        ]
      },
      {
        id: 6,
        icon: "üéì",
        title: "Evaluaci√≥n y Certificaci√≥n",
        description: "Tu transformaci√≥n completa: De instructor a educador andrag√≥gico",
        pages: [
          {
            type: "story",
            content: `
              <div class="story-text">
                <div class="intro-highlight">
                  <h3>üéì Tu Transformaci√≥n como Instructor Andrag√≥gico</h3>
                  <p>Has recorrido un camino extraordinario. Ya no eres solo un instructor de conducci√≥n, eres un <strong>educador andrag√≥gico especializado en seguridad vial</strong>.</p>
                </div>
                
                <div class="flip-card">
                  <div class="flip-card-inner">
                    <div class="flip-card-front">
                      <h3>üìö Antes</h3>
                      <p>Ense√±abas reglas de tr√°nsito</p>
                    </div>
                    <div class="flip-card-back">
                      <h3>üåü Ahora</h3>
                      <p>Transformas vidas y salvas familias</p>
                    </div>
                  </div>
                </div>
                
                <div class="highlight-box success">
                  <strong>‚úÖ Ahora Dominas:</strong>
                  <ul>
                    <li>üéØ Principios fundamentales de la andragog√≠a aplicada a la conducci√≥n</li>
                    <li>üë• Estrategias espec√≠ficas para cada grupo etario</li>
                    <li>‚ö° T√©cnicas dram√°ticas para ense√±ar sobre velocidad</li>
                    <li>üò¥ M√©todos efectivos para prevenir la fatiga al volante</li>
                    <li>üì± Estrategias innovadoras contra la distracci√≥n</li>
                    <li>ü™ñ Pedagog√≠a de la protecci√≥n personal</li>
                    <li>üé≠ T√©cnicas de storytelling para impacto emocional</li>
                    <li>üéÆ Gamificaci√≥n y tecnolog√≠a educativa</li>
                    <li>üí° Ejercicios pr√°cticos y demostraciones impactantes</li>
                  </ul>
                </div>
                
                <div class="expandable-section">
                  <div class="expandable-header" onclick="toggleExpandable(this)">
                    <span>üèÜ Tu Caja de Herramientas Andrag√≥gicas</span>
                    <span class="expand-icon">‚ñº</span>
                  </div>
                  <div class="expandable-content">
                    <div class="flashcard-container">
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üë¶ ADOLESCENTES<br><small>16-18 a√±os</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Estrategias:</strong> Gamificaci√≥n, presi√≥n de grupo positiva, tecnolog√≠a, estad√≠sticas impactantes, historias de pares</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üë® J√ìVENES<br><small>19-35 a√±os</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Estrategias:</strong> Impacto econ√≥mico, desarrollo profesional, eficiencia, tecnolog√≠a como aliada, ROI de la seguridad</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üëî ADULTOS<br><small>36-59 a√±os</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Estrategias:</strong> Responsabilidad familiar, ejemplo para hijos, protecci√≥n de seres queridos, experiencia como fortaleza</div>
                          </div>
                        </div>
                      </div>
                      
                      <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-inner">
                          <div class="flashcard-front">
                            <div>üë¥ MAYORES<br><small>60+ a√±os</small></div>
                          </div>
                          <div class="flashcard-back">
                            <div><strong>Estrategias:</strong> Respeto por experiencia, adaptaci√≥n sabia, autonom√≠a, evoluci√≥n de la seguridad, sabidur√≠a generacional</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="stats-grid">
                  <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label">M√≥dulos Especializados Completados</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">20+</div>
                    <div class="stat-label">T√©cnicas Andrag√≥gicas Aprendidas</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">‚àû</div>
                    <div class="stat-label">Vidas que Puedes Impactar</div>
                  </div>
                </div>
                
                <div class="character-bubble">
                  <strong>üí° Tu Nueva Misi√≥n:</strong><br>
                  No solo formas conductores, formas <strong>embajadores de la seguridad vial</strong>. Cada estudiante que pasa por tus manos se convierte en un multiplicador de vida.
                </div>
                
                <div class="completion-badge">
                  <div class="badge-icon">üèÜ</div>
                  <h2 style="color: #1e40af; margin-bottom: 15px;">¬°Certificaci√≥n Completada!</h2>
                  <p style="font-size: 20px; color: #4b5563;">Instructor Certificado en<br><strong>Andragog√≠a Aplicada a la Formaci√≥n de Conductores</strong></p>
                  <p style="font-size: 16px; color: #6b7280; margin-top: 20px;">Centro de Ense√±anza Automovil√≠stica Anda Vial</p>
                </div>
                
                <div class="certificate-container">
                  <div class="certificate">
                    <div class="certificate-header">
                      <div class="certificate-logo">üöó ANDA VIAL</div>
                      <div class="certificate-subtitle">Centro de Ense√±anza Automovil√≠stica</div>
                    </div>
                    
                    <div class="certificate-title">CERTIFICADO DE FINALIZACI√ìN</div>
                    
                    <div class="certificate-body">
                      <p class="certificate-text">Se certifica que</p>
                      <div class="certificate-name" id="certificateName">${currentStudent ? currentStudent.student_name.toUpperCase() : 'INSTRUCTOR'}</div>
                      <p class="certificate-text">ha completado satisfactoriamente el curso de</p>
                      <div class="certificate-course">ANDRAGOG√çA APLICADA A LA FORMACI√ìN DE CONDUCTORES</div>
                      <p class="certificate-text">con una duraci√≥n de 20 horas acad√©micas</p>
                      
                      <div class="certificate-modules">
                        <div class="module-completed">‚úì Fundamentos de la Andragog√≠a Vial</div>
                        <div class="module-completed">‚úì Ense√±anza sobre Velocidad</div>
                        <div class="module-completed">‚úì Fatiga: Estrategias de Ense√±anza</div>
                        <div class="module-completed">‚úì Distracci√≥n: M√©todos de Ense√±anza</div>
                        <div class="module-completed">‚úì Casco: Pedagog√≠a de la Protecci√≥n</div>
                      </div>
                      
                      <div class="certificate-date">
                        <p>Otorgado el <span id="certificateDate">${new Date().toLocaleDateString('es-CO', { 
                          year: 'numeric', 
                          month: 'long', 
                          day: 'numeric' 
                        })}</span></p>
                      </div>
                    </div>
                    
                    <div class="certificate-footer">
                      <div class="signature-section">
                        <div class="signature-line"></div>
                        <p class="signature-title">Facilitadora</p>
                        <p class="signature-name">Nidia Esperanza Ochoa - NEO</p>
                      </div>
                      
                      <div class="certificate-seal">
                        <div class="seal">
                          <div class="seal-inner">
                            <div class="seal-text">ANDA VIAL</div>
                            <div class="seal-year">2024</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="certificate-number">
                      Certificado No. AV-AND-${currentStudent ? currentStudent.started_at ? new Date(currentStudent.started_at).getFullYear() : '2024' : '2024'}-${String(Math.floor(Math.random() * 10000)).padStart(4, '0')}
                    </div>
                  </div>
                  

                </div>
                
                <div class="certificate-actions">
                  <div class="button-group" style="margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="printCertificate()">
                      üñ®Ô∏è Imprimir Certificado
                    </button>
                  </div>
                </div>
                
                <div class="highlight-box info">
                  <strong>üöÄ Pr√≥ximos Pasos como Instructor Certificado:</strong>
                  <ul>
                    <li>Implementa estas t√©cnicas en tus clases diarias</li>
                    <li>Adapta los m√©todos a tu estilo personal de ense√±anza</li>
                    <li>Mide el impacto: observa c√≥mo cambian tus estudiantes</li>
                    <li>Comparte tu experiencia con otros instructores</li>
                    <li>Mantente actualizado con nuevas t√©cnicas andrag√≥gicas</li>
                    <li>S√© un l√≠der en la transformaci√≥n de la educaci√≥n vial</li>
                  </ul>
                </div>
                
                <div class="interactive-demo">
                  <h4>üìã Tu Compromiso como Instructor Andrag√≥gico</h4>
                  <div style="background: rgba(30, 64, 175, 0.1); padding: 25px; border-radius: 15px; margin: 20px 0;">
                    <p style="font-size: 18px; line-height: 1.8; text-align: center;" id="commitmentText">
                      "Yo, <strong>${currentStudent ? currentStudent.student_name : 'Instructor'}</strong>, me comprometo a:<br><br>
                      
                      üéØ Aplicar los principios andrag√≥gicos en cada clase<br>
                      üë• Adaptar mi ense√±anza a cada grupo de edad<br>
                      üí° Usar t√©cnicas innovadoras y memorables<br>
                      ‚ù§Ô∏è Conectar emocionalmente con mis estudiantes<br>
                      üìä Usar datos y estad√≠sticas de manera impactante<br>
                      üé≠ Contar historias que transformen vidas<br>
                      üîÑ Evaluar y mejorar constantemente mis m√©todos<br>
                      üåü Ser un ejemplo de excelencia educativa<br>
                      ü§ù Colaborar con otros instructores para mejorar<br>
                      üíö Recordar que cada clase puede salvar una vida<br><br>
                      
                      <strong>Porque ense√±ar no es solo transmitir conocimiento,<br>es transformar vidas y construir un futuro m√°s seguro.</strong>
                    </p>
                  </div>
                </div>
                
                <p style="text-align: center; font-size: 24px; color: #1e40af; font-weight: bold; margin-top: 40px;">
                  ¬°Bienvenido a la √©lite de instructores andrag√≥gicos de Anda Vial! üöó‚ú®
                </p>
                
                <p style="text-align: center; font-size: 16px; color: #6b7280; margin-top: 20px;">
                  Ahora tienes el poder de transformar la educaci√≥n vial en Colombia.<br>
                  Cada estudiante que formes ser√° un conductor m√°s seguro,<br>
                  y cada conductor seguro salva vidas.
                </p>
              </div>
            `
          }
        ]
      }
    ];

    const dataHandler = {
      onDataChanged(data) {
        console.log('üìä Data SDK - Datos recibidos:', data);
        if (data && data.length > 0) {
          currentStudent = data[0];
          console.log('‚úÖ Estudiante cargado:', currentStudent);
          updateUIWithStudentData();
        } else {
          console.log('‚ö†Ô∏è No hay datos guardados a√∫n');
        }
      }
    };

    async function initializeApp() {
      console.log('üöÄ Iniciando aplicaci√≥n...');
      
      // Inicializar Data SDK
      if (window.dataSdk) {
        console.log('üìä Inicializando Data SDK...');
        try {
          const initResult = await window.dataSdk.init(dataHandler);
          if (initResult.isOk) {
            console.log('‚úÖ Data SDK inicializado correctamente');
          } else {
            console.error('‚ùå Error al inicializar Data SDK:', initResult.error);
          }
        } catch (error) {
          console.error('‚ùå Error cr√≠tico en Data SDK:', error);
        }
      } else {
        console.log('‚ö†Ô∏è Data SDK no disponible');
      }

      // Inicializar Element SDK
      if (window.elementSdk) {
        console.log('üé® Inicializando Element SDK...');
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const titleElement = document.getElementById('courseTitle');
            if (titleElement) {
              titleElement.textContent = config.course_title || defaultConfig.course_title;
            }
            
            const welcomeMsgElement = document.getElementById('welcomeMsg');
            if (welcomeMsgElement) {
              welcomeMsgElement.textContent = config.welcome_message || defaultConfig.welcome_message;
            }
            
            const institutionElement = document.getElementById('institutionName');
            if (institutionElement) {
              institutionElement.textContent = config.institution_name || defaultConfig.institution_name;
            }
          },
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ["course_title", config.course_title || defaultConfig.course_title],
            ["institution_name", config.institution_name || defaultConfig.institution_name],
            ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
          ])
        });
        console.log('‚úÖ Element SDK inicializado');
      }

      setupEventListeners();
      console.log('üéØ Aplicaci√≥n lista');
    }

    function setupEventListeners() {
      document.getElementById('studentName').addEventListener('input', checkStartButton);
      document.getElementById('startBtn').addEventListener('click', startCourse);
      document.getElementById('backBtn').addEventListener('click', showCourseScreen);
      document.getElementById('prevBtn').addEventListener('click', previousPage);
      document.getElementById('nextBtn').addEventListener('click', nextPage);
    }

    function checkStartButton() {
      const name = document.getElementById('studentName').value.trim();
      const btn = document.getElementById('startBtn');
      btn.disabled = !name;
    }

    async function startCourse() {
      const name = document.getElementById('studentName').value.trim();
      const btn = document.getElementById('startBtn');
      
      console.log('üéì Iniciando curso para:', name);
      
      btn.disabled = true;
      btn.innerHTML = '<div class="spinner"></div>Guardando en tu hoja...';

      const studentData = {
        student_name: name,
        current_module: 1,
        completed_modules: '',
        progress_percentage: 0,
        quiz_scores: '',
        started_at: new Date().toISOString(),
        last_updated: new Date().toISOString()
      };

      try {
        if (window.dataSdk) {
          console.log('üíæ Guardando datos en Canva Sheet:', studentData);
          
          const result = await window.dataSdk.create(studentData);

          if (result.isOk) {
            console.log('‚úÖ ¬°Datos guardados exitosamente en tu hoja de Canva!');
            currentStudent = studentData;
            showInlineMessage('¬°Perfecto! Tus datos se guardaron en la hoja de Canva', 'success');
            setTimeout(() => {
              showCourseScreen();
            }, 2000);
          } else {
            console.error('‚ùå Error del Data SDK:', result.error);
            showInlineMessage(`Error al guardar: ${result.error.message || 'Error desconocido'}`, 'error');
            btn.disabled = false;
            btn.innerHTML = 'üöÄ Comenzar Mi Formaci√≥n como Instructor';
          }
        } else {
          console.log('‚ö†Ô∏è Data SDK no disponible, usando modo local');
          currentStudent = studentData;
          showInlineMessage('Modo local activado (sin guardado en hoja)', 'info');
          setTimeout(() => {
            showCourseScreen();
          }, 2000);
        }
      } catch (error) {
        console.error('üí• Error cr√≠tico en startCourse:', error);
        showInlineMessage(`Error cr√≠tico: ${error.message}`, 'error');
        btn.disabled = false;
        btn.innerHTML = 'üöÄ Comenzar Mi Formaci√≥n como Instructor';
      }
    }

    function showInlineMessage(message, type) {
      const messageDiv = document.createElement('div');
      let className = 'highlight-box';
      if (type === 'success') className += ' success';
      else if (type === 'info') className += ' info';
      
      messageDiv.className = className;
      messageDiv.innerHTML = `<p>${message}</p>`;
      messageDiv.style.marginTop = '20px';
      
      const startBtn = document.getElementById('startBtn');
      startBtn.parentNode.insertBefore(messageDiv, startBtn.nextSibling);
      
      setTimeout(() => {
        messageDiv.remove();
      }, 5000);
    }

    // Sistema de Tips y Pistas
    function showDataTips() {
      const tipsContainer = document.createElement('div');
      tipsContainer.className = 'highlight-box info';
      tipsContainer.style.marginTop = '20px';
      tipsContainer.innerHTML = `
        <h4>üí° Tips para el Guardado de Datos</h4>
        <div class="expandable-section">
          <div class="expandable-header" onclick="toggleExpandable(this)">
            <span>üîç ¬øPor qu√© no se guardan mis datos?</span>
            <span class="expand-icon">‚ñº</span>
          </div>
          <div class="expandable-content">
            <p><strong>Posibles causas:</strong></p>
            <ul>
              <li>üåê <strong>Conexi√≥n:</strong> Verifica tu conexi√≥n a internet</li>
              <li>üîí <strong>Permisos:</strong> El navegador puede estar bloqueando el guardado</li>
              <li>‚è±Ô∏è <strong>Tiempo:</strong> El sistema puede tardar unos segundos</li>
              <li>üîÑ <strong>Sincronizaci√≥n:</strong> Los datos se sincronizan autom√°ticamente</li>
            </ul>
            
            <p><strong>C√≥mo verificar que funciona:</strong></p>
            <ol>
              <li>Abre la consola del navegador (F12)</li>
              <li>Busca mensajes que empiecen con ‚úÖ o ‚ùå</li>
              <li>Si ves "‚úÖ Datos guardados", est√° funcionando</li>
              <li>Ve a tu hoja de Canva para confirmar</li>
            </ol>
            
            <p><strong>Qu√© datos se guardan:</strong></p>
            <ul>
              <li>üìù Tu nombre completo</li>
              <li>üìä Progreso por m√≥dulo (0-100%)</li>
              <li>‚úÖ M√≥dulos completados</li>
              <li>üìÖ Fecha de inicio del curso</li>
              <li>üîÑ √öltima actualizaci√≥n</li>
            </ul>
          </div>
        </div>
      `;
      
      const welcomeScreen = document.getElementById('welcomeScreen');
      welcomeScreen.appendChild(tipsContainer);
    }

    function updateUIWithStudentData() {
      if (!currentStudent) return;

      document.getElementById('studentGreeting').textContent = `üëã Hola, ${currentStudent.student_name}`;
      document.getElementById('progressText').textContent = `Progreso: ${currentStudent.progress_percentage}%`;
      document.getElementById('progressFill').style.width = `${currentStudent.progress_percentage}%`;

      renderModuleList();
    }

    function showCourseScreen() {
      document.getElementById('welcomeScreen').classList.add('hidden');
      document.getElementById('moduleScreen').classList.add('hidden');
      document.getElementById('courseScreen').classList.remove('hidden');
      
      if (currentStudent) {
        updateUIWithStudentData();
      }
    }

    function renderModuleList() {
      const moduleList = document.getElementById('moduleList');
      const completedModules = currentStudent.completed_modules ? currentStudent.completed_modules.split(',').map(Number) : [];
      
      moduleList.innerHTML = modules.map(module => {
        const isCompleted = completedModules.includes(module.id);
        const isActive = module.id === currentStudent.current_module;
        
        return `
          <div class="module-card ${isCompleted ? 'completed' : ''} ${isActive ? 'active' : ''}" onclick="openModule(${module.id})">
            <div class="module-icon">${module.icon}</div>
            <div class="module-title">${module.title}</div>
            <div class="module-description">${module.description}</div>
            ${isCompleted ? '<div style="text-align: right; margin-top: 15px; font-size: 16px;">‚úÖ Completado</div>' : ''}
          </div>
        `;
      }).join('');
    }

    window.openModule = function(moduleId) {
      currentModuleIndex = moduleId - 1;
      currentPageIndex = 0;
      quizAnswers = {}; // Reset all quiz answers when opening a new module
      showModuleScreen();
    };

    function showModuleScreen() {
      document.getElementById('courseScreen').classList.add('hidden');
      document.getElementById('moduleScreen').classList.remove('hidden');
      renderModulePage();
    }

    function renderModulePage() {
      const module = modules[currentModuleIndex];
      const page = module.pages[currentPageIndex];
      const moduleContent = document.getElementById('moduleContent');
      
      let content = `<h2>${module.icon} ${module.title}</h2>`;
      
      if (page.type === 'story' || page.type === 'interactive' || page.type === 'age-groups') {
        content += page.content;
      } else if (page.type === 'quiz') {
        content += renderQuiz(page);
      }
      
      moduleContent.innerHTML = content;
      
      // Update certificate name and commitment text if we're on the final module
      if (currentModuleIndex === modules.length - 1) {
        const certificateNameElement = document.getElementById('certificateName');
        if (certificateNameElement && currentStudent) {
          certificateNameElement.textContent = currentStudent.student_name.toUpperCase();
        }
        
        const commitmentTextElement = document.getElementById('commitmentText');
        if (commitmentTextElement && currentStudent) {
          commitmentTextElement.innerHTML = `
            "Yo, <strong>${currentStudent.student_name}</strong>, me comprometo a:<br><br>
            
            üéØ Aplicar los principios andrag√≥gicos en cada clase<br>
            üë• Adaptar mi ense√±anza a cada grupo de edad<br>
            üí° Usar t√©cnicas innovadoras y memorables<br>
            ‚ù§Ô∏è Conectar emocionalmente con mis estudiantes<br>
            üìä Usar datos y estad√≠sticas de manera impactante<br>
            üé≠ Contar historias que transformen vidas<br>
            üîÑ Evaluar y mejorar constantemente mis m√©todos<br>
            üåü Ser un ejemplo de excelencia educativa<br>
            ü§ù Colaborar con otros instructores para mejorar<br>
            üíö Recordar que cada clase puede salvar una vida<br><br>
            
            <strong>Porque ense√±ar no es solo transmitir conocimiento,<br>es transformar vidas y construir un futuro m√°s seguro.</strong>
          `;
        }
      }
      
      document.getElementById('prevBtn').disabled = currentPageIndex === 0;
      
      const isLastPage = currentPageIndex === module.pages.length - 1;
      const nextBtn = document.getElementById('nextBtn');
      nextBtn.disabled = false; // Reset disabled state
      
      if (page.type === 'quiz') {
        const quizAnswer = quizAnswers[currentPageIndex];
        if (quizAnswer && quizAnswer.completed) {
          nextBtn.textContent = 'Continuar ‚Üí';
          nextBtn.disabled = false;
        } else {
          nextBtn.textContent = 'Verificar Respuesta';
          nextBtn.disabled = !quizAnswers[currentPageIndex];
        }
      } else if (isLastPage) {
        nextBtn.textContent = 'Completar M√≥dulo ‚Üí';
      } else {
        nextBtn.textContent = 'Siguiente ‚Üí';
      }
    }

    function renderQuiz(page) {
      return `
        <h3>‚ùì ${page.question}</h3>
        <div id="quizOptions">
          ${page.options.map((option, index) => `
            <div class="quiz-option" onclick="selectQuizOption(${index}, ${option.correct})">
              ${option.text}
            </div>
          `).join('')}
        </div>
        <div id="quizExplanation" class="hidden highlight-box info" style="margin-top: 25px;">
          <strong>üí° Explicaci√≥n:</strong>
          <p>${page.explanation}</p>
        </div>
      `;
    }

    window.selectQuizOption = function(index, isCorrect) {
      if (quizAnswers[currentPageIndex] !== undefined) return;
      
      const options = document.querySelectorAll('.quiz-option');
      options[index].classList.add('selected');
      
      quizAnswers[currentPageIndex] = { index, isCorrect };
      
      document.getElementById('nextBtn').disabled = false;
    };

    // Interactive functions
    window.toggleExpandable = function(header) {
      const content = header.nextElementSibling;
      const icon = header.querySelector('.expand-icon');
      
      content.classList.toggle('expanded');
      icon.classList.toggle('rotated');
    };

    window.flipCard = function(card) {
      card.classList.toggle('flipped');
    };

    window.showAgeContent = function(contentId) {
      // Remove active class from all tabs and contents
      document.querySelectorAll('.age-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.age-content').forEach(content => content.classList.remove('active'));
      
      // Add active class to clicked tab and corresponding content
      event.target.classList.add('active');
      const content = document.getElementById(contentId);
      if (content) {
        content.classList.add('active');
      }
    };

    // Calculator functions
    window.selectVehicle = function(vehicleType) {
      document.querySelectorAll('.vehicle').forEach(v => v.classList.remove('selected'));
      document.querySelector(`[data-vehicle="${vehicleType}"]`).classList.add('selected');
      
      // Update calculation based on vehicle type
      calculateStoppingDistance();
    };

    window.calculateStoppingDistance = function() {
      const speed = parseFloat(document.getElementById('speedInput').value) || 50;
      const weather = parseFloat(document.getElementById('weatherSelect').value) || 1;
      
      // Get selected vehicle type
      const selectedVehicle = document.querySelector('.vehicle.selected');
      const vehicleType = selectedVehicle ? selectedVehicle.getAttribute('data-vehicle') : 'car';
      
      // Vehicle-specific coefficients
      const vehicleCoefficients = {
        'car': { reaction: 1.0, braking: 0.7, name: 'Autom√≥vil' },
        'motorcycle': { reaction: 1.2, braking: 0.6, name: 'Motocicleta' },
        'bike': { reaction: 1.5, braking: 0.4, name: 'Bicicleta' },
        'truck': { reaction: 1.8, braking: 0.5, name: 'Cami√≥n' }
      };
      
      const vehicle = vehicleCoefficients[vehicleType] || vehicleCoefficients['car'];
      
      const reactionDistance = (speed / 3.6) * vehicle.reaction;
      const brakingDistance = (speed * speed) / (2 * 9.8 * vehicle.braking);
      const totalDistance = (reactionDistance + brakingDistance) * weather;
      
      const resultElement = document.getElementById('stoppingResult');
      if (resultElement) {
        resultElement.innerHTML = `
          <strong>${vehicle.name}:</strong> Distancia Total de Frenado: ${Math.round(totalDistance)} metros<br>
          <small>Reacci√≥n: ${Math.round(reactionDistance)}m + Frenado: ${Math.round(brakingDistance * weather)}m</small>
        `;
      }
    };

    window.calculateMicrosleep = function() {
      const speed = parseFloat(document.getElementById('fatigueSpeed').value) || 90;
      const time = parseFloat(document.getElementById('microsleepTime').value) || 4;
      
      const distance = (speed / 3.6) * time;
      
      document.getElementById('microsleepResult').textContent = 
        `En ${time} segundos a ${speed} km/h recorres ${Math.round(distance)} metros completamente dormido`;
    };

    window.calculateDistraction = function() {
      const time = parseFloat(document.getElementById('messageTime').value) || 5;
      const speed = parseFloat(document.getElementById('distractionSpeed').value) || 100;
      
      const distance = (speed / 3.6) * time;
      
      document.getElementById('distractionResult').textContent = 
        `En ${time} segundos a ${speed} km/h recorres ${Math.round(distance)} metros completamente a ciegas`;
    };

    window.calculateTeenDemo = function() {
      const speed = parseFloat(document.getElementById('teenSpeed').value) || 80;
      const reaction = parseFloat(document.getElementById('teenReaction').value) || 1.5;
      
      const distance = (speed / 3.6) * reaction;
      
      document.getElementById('teenResult').textContent = 
        `En ${reaction} segundos a ${speed} km/h recorres ${Math.round(distance)} metros a ciegas`;
    };

    window.calculateFineDemo = function() {
      const salario = parseFloat(document.getElementById('salarioMinimo').value) || 1300000;
      const smmlv = parseFloat(document.getElementById('excessSpeed').value) || 15;
      
      const multa = salario * smmlv;
      
      document.getElementById('fineResult').textContent = 
        `Multa: $${multa.toLocaleString()} + Aumento seguro + Tiempo perdido`;
    };

    window.calculateCarlosDemo = function() {
      const carlosSpeed = parseFloat(document.getElementById('carlosSpeed').value) || 90;
      const limit = parseFloat(document.getElementById('speedLimit').value) || 60;
      
      const excess = carlosSpeed - limit;
      const energyIncrease = Math.round(((carlosSpeed * carlosSpeed) / (limit * limit) - 1) * 100);
      
      document.getElementById('carlosResult').textContent = 
        `Exceso: ${excess} km/h = ${energyIncrease}% m√°s energ√≠a de impacto`;
    };

    window.calculateSleepDeficit = function() {
      const teenSleep = parseFloat(document.getElementById('teenSleep').value) || 6;
      const needed = parseFloat(document.getElementById('neededSleep').value) || 9;
      
      const deficit = needed - teenSleep;
      const alcoholEquivalent = (deficit * 0.01).toFixed(2);
      
      document.getElementById('sleepDeficitResult').textContent = 
        `D√©ficit: ${deficit} horas = Equivale a ${alcoholEquivalent}% alcohol en sangre`;
    };

    window.calculateProductivity = function() {
      const workHours = parseFloat(document.getElementById('workHours').value) || 10;
      const sleep = parseFloat(document.getElementById('youngSleep').value) || 5;
      
      const productivity = Math.max(30, 100 - (workHours - 8) * 5 - (8 - sleep) * 10);
      const riskIncrease = Math.round((10 - sleep) * 50);
      
      document.getElementById('productivityResult').textContent = 
        `Rendimiento: ${Math.round(productivity)}% | Riesgo de accidente: +${riskIncrease}%`;
    };

    window.calculateFatigueLevel = function() {
      const awake = parseFloat(document.getElementById('awakeHours').value) || 20;
      const stress = parseFloat(document.getElementById('stressLevel').value) || 8;
      
      const alcoholEquivalent = (awake * 0.004).toFixed(2);
      const riskLevel = awake > 18 ? 'ALTO RIESGO' : 'RIESGO MODERADO';
      
      document.getElementById('fatigueResult').textContent = 
        `Equivale a ${alcoholEquivalent}% alcohol + factor estr√©s = ${riskLevel}`;
    };

    window.calculateMedicationEffect = function() {
      const meds = parseFloat(document.getElementById('medications').value) || 3;
      const quality = parseFloat(document.getElementById('sleepQuality').value) || 6;
      
      const risk = meds > 2 && quality < 7 ? 'MODERADO' : 'BAJO';
      
      document.getElementById('medicationResult').textContent = 
        `Riesgo de somnolencia: ${risk} | Horario √≥ptimo: 10 AM - 4 PM`;
    };

    window.calculateNotificationImpact = function() {
      const notifications = parseFloat(document.getElementById('notifications').value) || 15;
      const duration = parseFloat(document.getElementById('tripDuration').value) || 30;
      
      const totalNotifications = (notifications * duration / 60).toFixed(1);
      
      document.getElementById('notificationResult').textContent = 
        `En ${duration} minutos recibir√°s ${totalNotifications} notificaciones = ${totalNotifications} oportunidades de accidente`;
    };

    window.calculateProfessionalRisk = function() {
      const salary = parseFloat(document.getElementById('monthlySalary').value) || 3000000;
      const importance = parseFloat(document.getElementById('messageImportance').value) || 5;
      
      document.getElementById('professionalRiskResult').textContent = 
        `Beneficio: $0 | Riesgo: Perder trabajo + multa $19,500,000`;
    };

    window.calculateFamilyImpact = function() {
      const age = parseFloat(document.getElementById('childAge').value) || 12;
      const usage = parseFloat(document.getElementById('phoneUsage').value) || 10;
      
      const yearlyExamples = usage * 52;
      
      document.getElementById('familyImpactResult').textContent = 
        `Tu hijo ver√° ${yearlyExamples} ejemplos negativos al a√±o`;
    };

    window.calculateGenerationalAdvantage = function() {
      const experience = parseFloat(document.getElementById('drivingExperience').value) || 40;
      const phoneUse = parseFloat(document.getElementById('seniorPhoneUse').value) || 2;
      
      document.getElementById('generationalResult').textContent = 
        `Ventaja: ${experience} a√±os de experiencia + baja distracci√≥n = CONDUCTOR SABIO`;
    };

    window.calculateBrainImpact = function() {
      const height = parseFloat(document.getElementById('fallHeight').value) || 1;
      const speed = Math.sqrt(2 * 9.8 * height) * 3.6; // Convert to km/h
      const energy = 5 * 9.8 * height; // Approximate energy for 5kg head
      
      document.getElementById('impactSpeed').value = Math.round(speed);
      document.getElementById('brainImpactResult').textContent = 
        `Energ√≠a de impacto: ${Math.round(energy)} Joules = Suficiente para fractura craneal`;
    };

    window.calculateRouteRisk = function() {
      const distance = parseFloat(document.getElementById('workDistance').value) || 5;
      const trips = parseFloat(document.getElementById('weeklyTrips').value) || 10;
      
      const weeklyExposure = distance * trips;
      
      document.getElementById('routeRiskResult').textContent = 
        `Exposici√≥n semanal: ${weeklyExposure} km sin casco = ${weeklyExposure} oportunidades de tragedia`;
    };

    window.calculateHelmetROI = function() {
      const helmetCost = parseFloat(document.getElementById('helmetCost').value) || 300000;
      const injuryCost = parseFloat(document.getElementById('injuryCost').value) || 100000000;
      
      const roi = Math.round((injuryCost / helmetCost - 1) * 100);
      
      document.getElementById('helmetROIResult').textContent = 
        `ROI del casco: ${roi.toLocaleString()}% - La mejor inversi√≥n de tu vida`;
    };

    window.calculateFamilyHelmetImpact = function() {
      const kids = parseFloat(document.getElementById('numberOfKids').value) || 2;
      const rides = parseFloat(document.getElementById('helmetlessRides').value) || 5;
      
      const yearlyExamples = rides * 52;
      
      document.getElementById('familyHelmetResult').textContent = 
        `Tus hijos ven ${yearlyExamples} ejemplos negativos al a√±o`;
    };

    window.calculateTrafficEvolution = function() {
      const years = parseFloat(document.getElementById('yearsRiding').value) || 40;
      const oldVehicles = parseFloat(document.getElementById('oldVehicles').value) || 100;
      
      const currentVehicles = oldVehicles * 10; // Approximate 10x increase
      const increase = Math.round((currentVehicles / oldVehicles - 1) * 100);
      
      document.getElementById('trafficEvolutionResult').textContent = 
        `Aumento del tr√°fico: ${increase}% m√°s veh√≠culos que hace ${years} a√±os`;
    };

    function previousPage() {
      if (currentPageIndex > 0) {
        currentPageIndex--;
        renderModulePage();
      }
    }

    async function nextPage() {
      const module = modules[currentModuleIndex];
      const page = module.pages[currentPageIndex];
      
      if (page.type === 'quiz') {
        if (!quizAnswers[currentPageIndex]) return;
        
        // Check if quiz is already completed (showing explanation)
        if (quizAnswers[currentPageIndex].completed) {
          // Continue to next page or complete module
          if (currentPageIndex < module.pages.length - 1) {
            currentPageIndex++;
            renderModulePage();
          } else {
            await completeModule();
          }
          return;
        }
        
        // Show quiz results
        const answer = quizAnswers[currentPageIndex];
        const options = document.querySelectorAll('.quiz-option');
        
        options.forEach((option, index) => {
          if (index === answer.index) {
            option.classList.add(answer.isCorrect ? 'correct' : 'incorrect');
          }
        });
        
        document.getElementById('quizExplanation').classList.remove('hidden');
        document.getElementById('nextBtn').textContent = 'Continuar ‚Üí';
        
        // Update quiz answer to mark as completed
        quizAnswers[currentPageIndex].completed = true;
        return;
      }
      
      if (currentPageIndex < module.pages.length - 1) {
        currentPageIndex++;
        renderModulePage();
      } else {
        // Complete module
        await completeModule();
      }
    }

    async function completeModule() {
      if (!currentStudent) {
        console.error('‚ùå No hay estudiante activo');
        return;
      }
      
      console.log('üéØ Completando m√≥dulo:', modules[currentModuleIndex].title);
      
      const completedModules = currentStudent.completed_modules ? 
        currentStudent.completed_modules.split(',').map(Number).filter(n => n) : [];
      
      if (!completedModules.includes(modules[currentModuleIndex].id)) {
        completedModules.push(modules[currentModuleIndex].id);
      }
      
      const nextModuleId = Math.min(modules[currentModuleIndex].id + 1, modules.length);
      const progressPercentage = Math.round((completedModules.length / modules.length) * 100);
      
      const updatedStudent = {
        ...currentStudent,
        completed_modules: completedModules.join(','),
        current_module: nextModuleId,
        progress_percentage: progressPercentage,
        last_updated: new Date().toISOString()
      };
      
      console.log('üìä Nuevo progreso:', {
        modulo_completado: modules[currentModuleIndex].title,
        progreso_total: `${progressPercentage}%`,
        modulos_completados: completedModules.length,
        siguiente_modulo: nextModuleId
      });
      
      try {
        if (window.dataSdk) {
          console.log('üíæ Actualizando datos en Canva Sheet...');
          
          const result = await window.dataSdk.update(updatedStudent);
          
          if (result.isOk) {
            console.log('‚úÖ ¬°Progreso guardado exitosamente en tu hoja!');
            currentStudent = updatedStudent;
            
            // Mostrar mensaje de √©xito
            const successMsg = `¬°M√≥dulo completado! Progreso: ${progressPercentage}% - Guardado en tu hoja de Canva`;
            showInlineMessage(successMsg, 'success');
            
            setTimeout(() => {
              showCourseScreen();
            }, 2000);
          } else {
            console.error('‚ùå Error al actualizar en Data SDK:', result.error);
            showInlineMessage(`Error al guardar progreso: ${result.error.message || 'Error desconocido'}`, 'error');
            currentStudent = updatedStudent;
            showCourseScreen();
          }
        } else {
          console.log('‚ö†Ô∏è Data SDK no disponible, guardando localmente');
          currentStudent = updatedStudent;
          showInlineMessage('Progreso guardado localmente (sin sincronizaci√≥n)', 'info');
          setTimeout(() => {
            showCourseScreen();
          }, 1500);
        }
      } catch (error) {
        console.error('üí• Error cr√≠tico en completeModule:', error);
        showInlineMessage(`Error cr√≠tico: ${error.message}`, 'error');
        currentStudent = updatedStudent;
        showCourseScreen();
      }
    }

    // Initialize calculators on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Set up initial calculator values
      setTimeout(() => {
        if (document.getElementById('speedInput')) calculateStoppingDistance();
        if (document.getElementById('fatigueSpeed')) calculateMicrosleep();
        if (document.getElementById('messageTime')) calculateDistraction();
        if (document.getElementById('fallHeight')) calculateBrainImpact();
      }, 100);
    });

    // Knowledge check function
    window.selectKnowledgeOption = function(moduleIndex, pageIndex, questionIndex, optionIndex, isCorrect) {
      const questionElement = document.querySelectorAll('.knowledge-question')[questionIndex];
      const options = questionElement.querySelectorAll('.knowledge-option');
      const feedbackElement = document.getElementById(`feedback-${moduleIndex}-${pageIndex}-${questionIndex}`);
      
      // Clear previous selections
      options.forEach(option => {
        option.classList.remove('selected', 'correct', 'incorrect');
      });
      
      // Mark selected option
      const selectedOption = options[optionIndex];
      selectedOption.classList.add('selected');
      selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
      
      // Show feedback
      if (feedbackElement) {
        feedbackElement.style.display = 'block';
      }
    };



    // Certificate download functions
    window.downloadCertificateAsPDF = async function() {
      console.log('üîÑ Iniciando descarga de PDF...');
      
      const certificateElement = document.querySelector('.certificate');
      if (!certificateElement) {
        console.error('‚ùå No se encontr√≥ el elemento certificado');
        alert('No se encontr√≥ el certificado para descargar');
        return;
      }

      // Check if libraries are loaded
      if (!window.html2canvas) {
        console.error('‚ùå html2canvas no est√° cargado');
        alert('Error: Librer√≠a html2canvas no disponible');
        return;
      }

      if (!window.jspdf) {
        console.error('‚ùå jsPDF no est√° cargado');
        alert('Error: Librer√≠a jsPDF no disponible');
        return;
      }

      try {
        // Show loading message
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="spinner"></div>Generando PDF...';
        btn.disabled = true;

        console.log('üì∏ Capturando certificado como imagen...');

        // Hide the action buttons temporarily
        const actionsElement = document.querySelector('.certificate-actions');
        if (actionsElement) {
          actionsElement.style.display = 'none';
        }

        // Create canvas from certificate
        const canvas = await window.html2canvas(certificateElement, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff',
          logging: true,
          width: certificateElement.offsetWidth,
          height: certificateElement.offsetHeight
        });

        console.log('‚úÖ Canvas creado:', canvas.width, 'x', canvas.height);

        // Show actions again
        if (actionsElement) {
          actionsElement.style.display = 'block';
        }

        console.log('üìÑ Creando PDF...');

        // Create PDF
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          orientation: 'landscape',
          unit: 'mm',
          format: 'a4'
        });

        const imgData = canvas.toDataURL('image/png');
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = pdf.internal.pageSize.getHeight();
        
        console.log('üìè Dimensiones PDF:', pdfWidth, 'x', pdfHeight);
        
        // Calculate dimensions to fit the page
        const imgWidth = canvas.width;
        const imgHeight = canvas.height;
        const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
        
        const finalWidth = imgWidth * ratio;
        const finalHeight = imgHeight * ratio;
        
        // Center the image
        const x = (pdfWidth - finalWidth) / 2;
        const y = (pdfHeight - finalHeight) / 2;

        pdf.addImage(imgData, 'PNG', x, y, finalWidth, finalHeight);
        
        const fileName = `Certificado_Andragogia_${currentStudent ? currentStudent.student_name.replace(/\s+/g, '_') : 'Instructor'}_${new Date().getFullYear()}.pdf`;
        
        console.log('üíæ Guardando PDF como:', fileName);
        pdf.save(fileName);

        // Reset button
        btn.innerHTML = originalText;
        btn.disabled = false;

        console.log('‚úÖ PDF descargado exitosamente');
        showInlineMessage('¬°Certificado descargado como PDF exitosamente!', 'success');

      } catch (error) {
        console.error('‚ùå Error generando PDF:', error);
        
        // Show actions again
        const actionsElement = document.querySelector('.certificate-actions');
        if (actionsElement) {
          actionsElement.style.display = 'block';
        }
        
        // Reset button
        const btn = event.target;
        btn.innerHTML = 'üìÑ Descargar PDF';
        btn.disabled = false;
        
        alert(`Error al generar el PDF: ${error.message}`);
        showInlineMessage('Error al generar el PDF. Intenta con la opci√≥n de imagen.', 'error');
      }
    };

    window.downloadCertificateAsImage = async function() {
      console.log('üîÑ Iniciando descarga de imagen...');
      
      const certificateElement = document.querySelector('.certificate');
      if (!certificateElement) {
        console.error('‚ùå No se encontr√≥ el elemento certificado');
        alert('No se encontr√≥ el certificado para descargar');
        return;
      }

      // Check if html2canvas is loaded
      if (!window.html2canvas) {
        console.error('‚ùå html2canvas no est√° cargado');
        alert('Error: Librer√≠a html2canvas no disponible');
        return;
      }

      try {
        // Show loading message
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="spinner"></div>Generando imagen...';
        btn.disabled = true;

        console.log('üì∏ Capturando certificado como imagen...');

        // Hide the action buttons temporarily
        const actionsElement = document.querySelector('.certificate-actions');
        if (actionsElement) {
          actionsElement.style.display = 'none';
        }

        // Create canvas from certificate
        const canvas = await window.html2canvas(certificateElement, {
          scale: 3,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff',
          logging: true,
          width: certificateElement.offsetWidth,
          height: certificateElement.offsetHeight
        });

        console.log('‚úÖ Canvas creado:', canvas.width, 'x', canvas.height);

        // Show actions again
        if (actionsElement) {
          actionsElement.style.display = 'block';
        }

        console.log('üñºÔ∏è Creando enlace de descarga...');

        // Create download link
        const link = document.createElement('a');
        const fileName = `Certificado_Andragogia_${currentStudent ? currentStudent.student_name.replace(/\s+/g, '_') : 'Instructor'}_${new Date().getFullYear()}.png`;
        link.download = fileName;
        link.href = canvas.toDataURL('image/png', 1.0);
        
        console.log('üíæ Iniciando descarga:', fileName);
        
        // Trigger download
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        // Reset button
        btn.innerHTML = originalText;
        btn.disabled = false;

        console.log('‚úÖ Imagen descargada exitosamente');
        showInlineMessage('¬°Certificado descargado como imagen exitosamente!', 'success');

      } catch (error) {
        console.error('‚ùå Error generando imagen:', error);
        
        // Show actions again
        const actionsElement = document.querySelector('.certificate-actions');
        if (actionsElement) {
          actionsElement.style.display = 'block';
        }
        
        // Reset button
        const btn = event.target;
        btn.innerHTML = 'üñºÔ∏è Descargar Imagen';
        btn.disabled = false;
        
        alert(`Error al generar la imagen: ${error.message}`);
        showInlineMessage('Error al generar la imagen. Por favor intenta de nuevo.', 'error');
      }
    };

    window.printCertificate = function() {
      console.log('üñ®Ô∏è Iniciando impresi√≥n...');
      
      // Create a new window with only the certificate
      const certificateElement = document.querySelector('.certificate');
      if (!certificateElement) {
        console.error('‚ùå No se encontr√≥ el elemento certificado');
        alert('No se encontr√≥ el certificado para imprimir');
        return;
      }

      console.log('üìÑ Creando ventana de impresi√≥n...');

      const printWindow = window.open('', '_blank', 'width=800,height=600');
      
      if (!printWindow) {
        alert('No se pudo abrir la ventana de impresi√≥n. Verifica que no est√© bloqueada por el navegador.');
        return;
      }

      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Certificado - ${currentStudent ? currentStudent.student_name : 'Instructor'}</title>
          <style>
            body { 
              margin: 0; 
              padding: 20px; 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              background: white;
            }
            .certificate {
              background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
              border: 3px solid #1e40af;
              border-radius: 20px;
              padding: 40px;
              margin: 20px auto;
              max-width: 800px;
              box-shadow: 0 20px 60px rgba(30, 64, 175, 0.3);
              position: relative;
              overflow: hidden;
            }
            .certificate-header {
              text-align: center;
              margin-bottom: 30px;
              padding-bottom: 20px;
              border-bottom: 2px solid #fbbf24;
            }
            .certificate-logo {
              font-size: 36px;
              font-weight: bold;
              background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #fbbf24 100%);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
              margin-bottom: 8px;
            }
            .certificate-subtitle {
              color: #1e40af;
              font-size: 16px;
              font-weight: 600;
            }
            .certificate-title {
              font-size: 28px;
              font-weight: bold;
              color: #1e40af;
              text-align: center;
              margin: 30px 0;
              letter-spacing: 2px;
              text-transform: uppercase;
            }
            .certificate-body {
              text-align: center;
              margin: 30px 0;
            }
            .certificate-text {
              color: #374151;
              font-size: 18px;
              margin: 15px 0;
              font-weight: 500;
            }
            .certificate-name {
              font-size: 32px;
              font-weight: bold;
              color: #1e40af;
              margin: 20px 0;
              padding: 15px;
              border-bottom: 3px solid #fbbf24;
              display: inline-block;
              min-width: 300px;
              text-transform: uppercase;
              letter-spacing: 1px;
            }
            .certificate-course {
              font-size: 24px;
              font-weight: bold;
              color: #1e40af;
              margin: 25px 0;
              text-transform: uppercase;
              letter-spacing: 1px;
            }
            .certificate-modules {
              display: grid;
              grid-template-columns: 1fr;
              gap: 8px;
              margin: 25px 0;
              text-align: left;
              max-width: 500px;
              margin-left: auto;
              margin-right: auto;
            }
            .module-completed {
              color: #059669;
              font-size: 16px;
              font-weight: 600;
              padding: 8px 15px;
              background: rgba(16, 185, 129, 0.1);
              border-radius: 8px;
              border-left: 4px solid #10b981;
            }
            .certificate-date {
              margin: 30px 0;
            }
            .certificate-date p {
              color: #374151;
              font-size: 18px;
              font-weight: 600;
            }
            .certificate-footer {
              display: flex;
              justify-content: space-between;
              align-items: flex-end;
              margin-top: 50px;
              padding-top: 30px;
              border-top: 2px solid #e5e7eb;
            }
            .signature-section {
              text-align: center;
              flex: 1;
            }
            .signature-line {
              width: 200px;
              height: 2px;
              background: #374151;
              margin: 0 auto 10px;
            }
            .signature-title {
              color: #374151;
              font-size: 14px;
              font-weight: 600;
              margin: 5px 0;
            }
            .signature-name {
              color: #6b7280;
              font-size: 12px;
              margin: 0;
            }
            .certificate-seal {
              flex: 0 0 auto;
            }
            .seal {
              width: 100px;
              height: 100px;
              border: 4px solid #1e40af;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
              position: relative;
            }
            .seal::before {
              content: '';
              position: absolute;
              width: 80px;
              height: 80px;
              border: 2px solid #fbbf24;
              border-radius: 50%;
            }
            .seal-inner {
              text-align: center;
              color: white;
              z-index: 1;
            }
            .seal-text {
              font-size: 12px;
              font-weight: bold;
              line-height: 1;
            }
            .seal-year {
              font-size: 10px;
              font-weight: 600;
            }
            .certificate-number {
              position: absolute;
              bottom: 15px;
              right: 20px;
              color: #6b7280;
              font-size: 12px;
              font-weight: 500;
            }
            .print-instructions {
              background: #e0f2fe;
              border: 2px solid #0288d1;
              border-radius: 10px;
              padding: 20px;
              margin: 20px 0;
              text-align: center;
            }
            .print-button {
              background: #1976d2;
              color: white;
              border: none;
              padding: 15px 30px;
              border-radius: 8px;
              font-size: 16px;
              font-weight: bold;
              cursor: pointer;
              margin: 10px;
            }
            .print-button:hover {
              background: #1565c0;
            }
            @media print {
              body { margin: 0; padding: 0; }
              .certificate { 
                box-shadow: none; 
                border: 2px solid #1e40af; 
                margin: 0; 
                max-width: none; 
                page-break-inside: avoid;
              }
              .print-instructions { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="print-instructions">
            <h3>üñ®Ô∏è Listo para Imprimir</h3>
            <p>Tu certificado est√° listo. Haz clic en el bot√≥n para imprimir o usa Ctrl+P</p>
            <button class="print-button" onclick="window.print()">üñ®Ô∏è Imprimir Certificado</button>
            <button class="print-button" onclick="window.close()" style="background: #757575;">‚ùå Cerrar</button>
          </div>
          ${certificateElement.outerHTML}
        </body>
        </html>
      `);
      
      printWindow.document.close();
      
      console.log('‚úÖ Ventana de impresi√≥n creada exitosamente');
      
      // Focus the new window
      printWindow.focus();
    };

    // Initialize the app
    initializeApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99a7ed1774a6b6f2',t:'MTc2MjQ2NzA4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
